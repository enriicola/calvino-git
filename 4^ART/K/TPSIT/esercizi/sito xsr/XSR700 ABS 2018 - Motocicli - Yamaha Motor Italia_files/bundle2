function acceptCookies(){var n=new Date,t;n.setTime(n.getTime()+31536e6);t="; expires="+n.toGMTString();document.cookie="CookieSettings=f=1-a=1-t=1"+t+"; path=/"}function onYouTubeIframeAPIReady(){$(".youtube_player").each(function(){var n=$(this),t=new YT.Player(this.id,{height:n.data("height"),width:n.data("width"),videoId:n.data("itemid"),playerVars:{showinfo:n.data("showinfo"),controls:n.data("controls"),rel:0},events:{onReady:onPlayerReady,onStateChange:onPlayerStateChange},autoplay:n.data("autoplay")});cb.modules.YoutubePlayers.push(t)})}function onPlayerReady(n){var i=n.target,t=i.getIframe(),r;t!=null&&(r=$(t.parentNode),r.hasClass("current")&&$(t).data("autoplay")==1&&i.playVideo())}function onPlayerStateChange(n){var t=n.target,r=t.getIframe(),i;r!=null&&(i=$(r.parentNode),(n.data==YT.PlayerState.PLAYING||n.data==YT.PlayerState.BUFFERING||n.data==YT.PlayerState.PAUSED)&&i.trigger("play"),n.data==YT.PlayerState.ENDED&&(t.seekTo(0),t.stopVideo(),setTimeout(function(){i.trigger("ended")},600)))}jQuery(function(n){function i(){n(window).scrollTop()>u?n(".main-nav").addClass("fixed"):n(".main-nav").removeClass("fixed")}var t,r,u;n("#cookieMessage").length==1&&(n.cookie("FirstVisit")==null?(n(".global-container").addClass("cookie"),n("#cookieMessage").slideDown(400,function(){}),t=new Date,t.setTime(t.getTime()+31536e6),r="; expires="+t.toGMTString(),document.cookie="FirstVisit=1"+r+"; path=/"):n.cookie("CookieSettings")==null&&acceptCookies());n(window).bind("gesturechange.cookie",i).bind("scroll.cookie",i).bind("touchmove.cookie",i);u=n(".main-nav").offset().top;n("div.cookieOptions a.continue").click(function(){acceptCookies();n(".global-container.cookie").removeClass("cookie");n("#cookieMessage").slideUp(400,function(){n(".main-nav").addClass("fixed");n(window).unbind(".cookie");n(this).remove()})})});$(document).ready(function(){function i(){var t=$(".main-nav").hasClass("fixed")?0:r;$(window).scrollTop()>$(".main-nav").height()+t?n==!1&&(n=!0,navigator.userAgent.match(/(iPod|iPhone|iPad)/)?($(".main-nav .brand").css("visibility","visible"),$(".main-nav .brand").css("opacity",1)):($(".main-nav .brand").css("visibility","visible"),$(".main-nav .brand").stop().animate({opacity:1},300))):n==!0&&(n=!1,navigator.userAgent.match(/(iPod|iPhone|iPad)/)?$(".main-nav .brand").css("opacity",0):$(".main-nav .brand").stop().animate({opacity:0},300,function(){$(this).css("visibility","hidden")}))}function f(){$.each($(".world-nav nav > ul > li"),function(){var i;if($(this).find("ul").length>0){var r=$(this).find(".world-nav-sub"),t=$(this).find(".world-nav-sub .wrapper"),n=r.find("ul"),u=$(this).find("> a"),f=u.width()+parseInt(u.css("padding-left"))+parseInt(u.css("padding-right"));r.css({display:"block"});i=$(this).offset().left-n.width()/2+f/2;i<t.offset().left?(i=t.offset().left,n.css({left:i,position:"absolute"})):n.css({left:i,position:"absolute"});i+n.width()>t.width()+t.offset().left&&(n.removeAttr("style"),n.css({left:t.width()+t.offset().left-n.width(),position:"absolute"}));n.width()>t.width()&&(n.removeAttr("style"),n.css({position:"relative"}));r.removeAttr("style")}})}var n=!1,r,u,t;$(window).bind("gesturechange",i).bind("scroll",i).bind("touchmove",i);window.self!=window.top&&($("header").hide(),$("footer").hide(),$("ul.breadcrumbs li:first").hide(),$(".main-container").removeClass("keyVisualModule"),$(".main-container").removeClass("keyVisualSpace"),$(".jsFeed").hide(),$(".c_promotional").hide(),$(".make-it-yours").hide(),$("div.page-header").css("margin","0"),$(".jsBannerSlider").hide(),$(".visualContainer").remove(),$(".links").hide(),$(".packages").hide(),$(".locate-dealer").hide(),$("ul.breadcrumbs li.dropdown").removeClass("dropdown"),$("ul.breadcrumbs ul.dropdown").remove(),$("#multiCarousel").remove(),$("#singleImage").remove(),$(".general-content").remove());$("#cookieMessage").length>0&&$(".main-nav").removeClass("fixed");r=$(".main-nav").offset().top;u="placeholder"in document.createElement("input");u||$("*[placeholder]").each(function(){var n=$(this);$.each(this.attributes,function(t,i){var u=i.name,r=i.value;u=="placeholder"&&(n.val()==""&&n.val(r),n.attr("data-placeholder",r))});$(this).focus(function(){$(this).val()==$(this).data("placeholder")&&$(this).val("")});$(this).blur(function(){$(this).val()==""&&$(this).val($(this).data("placeholder"))})});typeof updatePortalLinks!="undefined"&&(t="?redirect="+updatePortalLinks.pageId,typeof updatePortalLinks.referrer_qs!="undefined"&&updatePortalLinks.referrer_qs!=""&&(t+="&referrer_qs="+updatePortalLinks.referrer_qs),$("#regioneurope a").each(function(){$(this).attr("href",$(this).attr("href")+t)}));$("a.extern").click(function(){return window.open(this.href),!1});$("select.reloadfromoption").change(function(){if($(this).val()!="-1")if($("#dclanguage").length==1){var n=window.location.href.split("?");location.href=n.length>1?$(this).val()+"?"+n[1]:$(this).val()}else location.href=$(this).val()});$(".main-nav .brand").css("opacity",0);f();$(window).bind("resize",f);$(".jsautohide").delay(5e3).fadeOut("slow");$(".jsautohide .buttonClose").on("click",function(){return $(this).closest(".jsautohide").stop(!0,!0).fadeOut("slow"),!1});$("a.dealerLocatorPinButton").click(function(){$("html, body").animate({scrollTop:$("input.locationEntry").offset().top-70});initializeCriteo(labels.CriteoId,"trackTransaction",[{id:$(this).data("id"),price:$(this).data("variationprice"),quantity:1}])})});var cb=cb||{};cb.modules=cb.modules||{};cb.modules.worldNavigation=function(n){var t={};return t.mainHolder=n(".world-nav"),t.subNav=t.mainHolder.find(".world-nav-sub"),t.extraBar=t.mainHolder.find(".extrabar"),t.closeWait=null,t.selfCloseSpeed=5e3,t.methods={init:function(){function r(){clearInterval(t.closeWait);t.mainHolder.find(".hovered .world-nav-sub").fadeOut(400,function(){n(this).removeAttr("style");t.mainHolder.find(".hovered").removeClass("hovered");t.methods.positionExtraBar()});t.mainHolder.off("mouseenter")}if(t.mainHolder.length!=0){var i=t.mainHolder.find("nav > ul li.active").not(".world-nav-sub li");i.find(".active").length>0&&i.addClass("hovered");t.methods.showExtraBar();t.mainHolder.on("mouseenter",function(){r()});t.mainHolder.find("nav > ul > li").on("mouseover",function(){n(this).addClass("hovered");t.extraBar.is(":visible")&&t.methods.positionExtraBar()});t.mainHolder.find("nav > ul > li").on("mouseout",function(){n(this).removeClass("hovered");t.extraBar.is(":visible")&&t.methods.positionExtraBar(!0)});t.closeWait=setInterval(r,t.selfCloseSpeed)}},positionExtraBar:function(n){var i=t.mainHolder.height()+t.mainHolder.offset().top;n==null&&(i+=t.mainHolder.find(".world-nav-sub:visible").outerHeight());t.extraBar.css({top:i+"px",display:"block"})},showExtraBar:function(){var i=n.cookie("defaultCountryPath"),r=n.cookie("lastPhysicalCountry")||"";"enableExtraBar"in window&&window.enableExtraBar==="true"&&window.location.href.indexOf("designcafe")<0&&n.ajax({url:labels.ApiUrl+"api/language",dataType:"json",crossDomain:!0}).done(function(u){var e=u&&u.length?u[0].CountryCode:"",f,o,s;if(r!==e){if(n.cookie("lastPhysicalCountry",e,{expires:365,path:"/"}),e!==window.country){t.extraBar=n("#jsExtraBar");f=n('<div class="wrapper alignright">'+labels.WHICH_COUNTRY_TO_VISIT+' <span id="jsLocalCountryBtn"><\/span> <a href="#" class="btn" id="jsStayHereBtn">'+labels.STAY_HERE+'<\/a> <a href="#" id="jsAllBtn">'+labels.ALL+" &gt;<\/a><\/div>");t.extraBar.append(f);u&&u.length&&(o=f.find("#jsLocalCountryBtn"),n.each(u,function(t,i){var r=n('<a class="btn"><\/a>');r.attr("href",i.Ref+"/?redirect="+window.pageId);r.text(i.CountryName);r.on("click",function(t){t.preventDefault();var r=n(this).attr("href");n.cookie("defaultCountryPath",i.Ref,{expires:365,path:"/"});window.location.href=r});o.append(r)}));s=f.find("#jsStayHereBtn");s.on("click",function(n){n.preventDefault();t.extraBar.slideUp(400)});t.extraBar.addClass("country-selectbar extrabar");t.methods.positionExtraBar();t.extraBar.delay(8e3).slideUp(400)}}else i&&window.location.href.indexOf(i)<0&&(window.location.href=i+"/?redirect="+window.pageId)})}},{init:function(){return t.methods.init()}}}($);cb.modules.segmentNavigation=function(n){var t={};return t.mainHolder=n(".jsSegmentsFlow"),t.animSpeed=800,t.touchOS="ontouchstart"in document.documentElement?!0:!1,t.mobileOS=typeof orientation!="undefined"?!0:!1,t.methods={init:function(){t.mainHolder.length!=0&&t.mainHolder.each(function(){function tt(){i=i==a.length-1?0:++i;h.removeClass("selected");v(1,!0)}function it(){i=i==0?a.length-1:--i;h.removeClass("selected");v(-1,!0)}function v(r,h){if(clearTimeout(d),ut(),f==!1||h==!1){f=!0;r==undefined&&(r=1);var v=u.find("li:eq("+i+") a").data("contentid").replace(".","\\."),l=i>-1?n(v):e;l.length>0?(p.show(),w.addClass("hide"),i!=b&&(a.addClass("hide").removeAttr("style"),e.addClass("hide").removeAttr("style"),$selectionListButtons.removeClass("selected"),l!=e&&l.length>0?(c.show(),u.find("li:eq("+i+") a").addClass("selected")):o.length==0&&c.hide(),s.css({left:"0px"}),k.css({left:"0px"}).removeClass("hide").show(),r==1?(l.css({left:"950px"}).show(),h===!0?s.stop(!0,!0).animate({left:"-950px"},t.animSpeed,function(){f=!1}):(s.stop(!0,!0).css("left","-950px"),f=!1)):r==-1&&(l.css({left:"-950px"}).show(),h===!0?s.stop(!0,!0).animate({left:"950px"},t.animSpeed,function(){f=!1}):(s.stop(!0,!0).css("left","950px"),f=!1)),k=l,b=i)):f=!1}}function ut(){f=!1;s.stop(!0,!0)}function ft(){y.append(n('<div class="positionBar"><div class="bar"><\/div><\/div>'));l=y.find(".positionBar");l.find(".bar").width(100/a.length+"%")}function et(t){if(window.parent.location.href==window.location.href){r||(r=n('<div class="segmentBigVisual"><div class="visualBack"><\/div><div class="visualFront"><img src="" alt="segment big visual" /><\/div><\/div>'),n(".main-container").prepend(r));var u=r.find(".visualBack"),i=r.find(".visualFront");u.css({"background-image":i.css("background-image"),height:i.height()}).show();i.hide();i.find("img").unbind("load");i.find("img").bind("load",function(){r.show();i.show();var u=n(this).height();i.hide();i.css({"background-image":"url('"+t+"')",height:u+"px"});r.height()<u&&r.height(u);n(".keyvisual").hide();i.fadeIn()}).attr("src",t)}}function rt(){r!=null&&u.hasClass("init_selectionlist_mouseleft")&&(r.fadeOut("fast",function(){r.find(".visualFront").removeAttr("style");r.find(".visualBack").removeAttr("style")}),n(".keyvisual").fadeIn())}var y=n(this),u=n(this).find(".selectionList"),o=u.find("li.active"),a=n(this).find(".segments-holder .segmentGrid").not(".segmentGrid.overview, .segmentGrid.grid"),s=n(this).find(".segments-holder .segments"),p=n(this).find(".segments-holder"),w=n(this).find(".segmentGrid.grid"),h=n(this).find(".buttonGrid"),ot=n(this).find(".dropdown"),l=null,c=n(this).find(".previous-small, .next-small"),e=n(this).find(".segments-holder .segmentGrid.overview"),st=n(this).find(".segments-holder").width(),i=null,b=null,k=e,d=null,f=!1,r=null,g=null,nt=u.width()/u.find("li").length;u.find("li, li a span").width(nt.toFixed(2).substring(0,nt.toFixed(2).length-1));o.length>0&&(i=o.index(),b=i,e.hide(),e=n(o.find("a").data("contentid").replace(".","\\.")),k=e,e.addClass("default"),e.show(),n(".segments section:not(.overview)").length>1&&c.show());c.on("click",function(t){if(t.preventDefault(),!f){var i=n(this);i.hasClass("previous-small")?it():tt()}});this.touchOS&&n(".segments-holder").swipe({tap:function(t,i){var r=n(i).parent("a").attr("href");r!=null&&(window.location.href=r)},swipeLeft:function(){tt()},swipeRight:function(){it()},threshold:0,excludedElements:""});u.on("mouseenter",function(){var t=n(this);t.removeClass("init_selectionlist_mouseleft")});u.on("mouseleave",function(){var t=n(this);t.addClass("init_selectionlist_mouseleft")});if($selectionListButtons=u.find("a"),$selectionListButtons.mouseenter(function(){var t=n(this),i=setTimeout(function(){t.addClass("init_segment_mouseover");t.trigger("mouseover")},600);t.mouseleave(function(){clearTimeout(i);t.removeClass("init_segment_mouseover")})}),n.each($selectionListButtons,function(){n(this).bind("mouseover",function(){n(this).hasClass("init_segment_mouseover")&&(clearTimeout(g),n(this).data("image")!=null?et(n(this).data("image")):rt())});n(this).bind("mouseout",function(){g=setTimeout(function(){clearTimeout(g);rt()},300)})}),$selectionListButtons.length>1)$selectionListButtons.on("mouseover",function(t){if(t.preventDefault(),n(this).hasClass("init_segment_mouseover")){var r=i,u=1,e=!1;i=n(this).parent().index();i<r&&(u=-1);i!=r&&h.hasClass("selected")===!1&&(e=f===!0?!1:!0,v(u,e))}});h.on("click",function(t){t.preventDefault();n(".jsautohide").hide();n(this).hasClass("selected")?(n(this).removeClass("selected"),p.removeClass("hide"),i!=null&&(c.removeClass("hide"),l.show()),w.addClass("hide"),u.find("li:eq("+i+") a").addClass("selected")):(n(this).addClass("selected"),p.addClass("hide"),c.addClass("hide"),l.hide(),w.removeClass("hide"),$selectionListButtons.removeClass("selected"))});y.bind("mouseleave",function(){f=!1;clearTimeout(d);d=setTimeout(function(){o.length>0&&h.hasClass("selected")==!1&&(i=o.index(),v(1,!0),h.removeClass("selected"),l.show())},t.animSpeed)});ft()})},navigateBack:function(){t.mainHolder.navigateBackward()}},{init:function(){return t.methods.init()}}}($);cb.modules.newsFeed=function(n){var t={};return t.mainHolder=n(".jsFeed"),t.animSpeed=800,t.animating=!1,t.isloading=!1,t.methods={init:function(){t.mainHolder.length!=0&&typeof newsSettings!="undefined"&&t.mainHolder.each(function(){function h(){var t=n("#europeUpdates:checked").length>0;return{Category:newsSettings.relatedCategory,Segment:newsSettings.relatedSegment,IncludeEurope:t,Count:10,Page:newsSettings.pageNumber,RacingNewsUrl:newsSettings.racingNewsUrl,NewsCategory:newsSettings.newsCategory}}function s(u){var s=h();n.ajax({type:"POST",contentType:"application/json",dataType:"json",data:JSON.stringify(s),url:v(),error:function(n,t,i){console.log("AJAX Error",i)},beforeSend:function(){return t.isloading?!1:(t.isloading=!0,!0)},complete:function(){t.isloading=!1},success:function(t){if(jQuery.isEmptyObject(t)){r.hide();u&&i.reset();return}r.show();var s=f.find("input#category:checked").val();a=e.find(".feedBlock").length;i.addCounter=0;i.totalToAdd=2;s=="news"?e.addClass("full"):e.removeClass("full");o==0&&i.reset();t.length>0&&n.map(t,function(n){var r=i.newsColumnOne().length,t=i.newsColumnOne;i.newsColumnTwo().length<r?t=i.newsColumnTwo:i.newsColumnThree().length<r&&(t=i.newsColumnThree);t.push(n)});newsSettings.pageNumber++;o+=l}})}function v(){var n=newsSettings.newsCategory||"news",t=labels.PublicationId;return labels.ApiUrl+"api/"+t+"/"+n}function y(){var t=this;t.news=ko.observableArray([]);t.addCounter=0;t.totalToAdd=0;t.newsCategories=ko.observableArray([]);t.newsColumnOne=ko.observableArray([]);t.newsColumnTwo=ko.observableArray([]);t.newsColumnThree=ko.observableArray([]);t.templateType=function(n){return n.templateType};t.reset=function(){t.news.removeAll();t.newsColumnOne.removeAll();t.newsColumnTwo.removeAll();t.newsColumnThree.removeAll()};t.fadeOut=function(t){n(t).filter("div").fadeOut(100)};t.fadeIn=function(i){i.nodeType===1&&(n(i).hide().delay(300*t.addCounter).fadeIn("slow"),t.addCounter++)};c.hasClass("autoload")===!0&&s()}var c=n(this),r=n(this).find(".loadingbar"),e=n(this).find("#newscolumn"),u=!1,o=0,l=4,f=n(this).find(".newsfeed-filter"),a=0,i=new y;ko.applyBindings(i);n.ajax({type:"POST",contentType:"application/json",dataType:"json",data:JSON.stringify(h()),url:labels.ApiUrl+"api/"+labels.PublicationId+"/newscategories",success:function(n){i.newsCategories(n);f.find("input[value="+newsSettings.newsCategory+"]").prop("checked",!0)}});n(window).scroll(function(){n(window).scrollTop()+n(window).height()>=Math.floor(r.offset().top)&&u==!1?(u=!0,s(!1)):n(window).scrollTop()+n(window).height()<Math.floor(r.offset().top)&&u==!0&&(u=!1)});f.find(".category").on("click","label",function(){n(this).prev().click()});f.on("change","input, select",function(t){o=0;newsSettings.pageNumber=0;switch(n(t.currentTarget).val()){case"country":n("#countryUpdates").attr("checked","checked");n("#europeUpdates").removeAttr("checked");break;case"europe":n("#europeUpdates").attr("checked","checked");n("#countryUpdates").removeAttr("checked")}newsSettings.newsCategory=n(t.currentTarget).val();history.pushState&&history.pushState({},null,window.location.href.split("?")[0]+"?category="+newsSettings.newsCategory);s(!0)})})}},{init:function(){return t.methods.init()}}}($);cb.modules.keyVisual=function(n){var t={};return t.externalNavigation=n(".jsKeyVisualNavigation"),t.visualModules=n(".jsVisualCarousels"),t.animSpeed=600,t.intervalSpeed=1e4,t.timeOutMouseOver=300,t.triggerStopByYoutubeVideo=!1,t.methods={init:function(){t.visualModules.length!=0&&t.visualModules.each(function(){function h(u){if(r!=a&&o==!1){o=!0;e.css({left:"0px"});n(i).css({"z-index":0});n(i[a]).css({left:"0px","z-index":1});n(i[a]).find(".c_keyVisual").removeClass("current");var f=w?n(window).width():g.width();u?(n(i[r]).css({left:-f+"px","z-index":2}),e.stop(!0,!0).animate({left:f+"px"},t.animSpeed,function(){o=!1;d()})):(n(i[r]).css({left:f+"px","z-index":2}),e.stop(!0,!0).animate({left:-f+"px"},t.animSpeed,function(){o=!1;d()}));n(i[r]).find(".c_keyVisual").addClass("current");a=r;it()}}function d(){var t,e,u;i.find(".bb_wrapper").length>0&&n.each(i.find(".bb_wrapper"),function(){n(this)[0].call("pause")});i.find(".videoContainer").unbind(".video");t=n(i[r]).find(".videoContainer");t.find(".bb_wrapper").length>0&&(t.bind("ended.video",function(){y();c()}),t.find(".bb_wrapper")[0].call("seek",0),t.find(".bb_wrapper")[0].call("play"),f());t!=null&&(e=t.find(".youtube_player"),e!=null&&e[0]!=null&&(u=n.grep(cb.modules.YoutubePlayers,function(n){return n.getIframe().id==e[0].id}),u!=null&&u[0]!=null&&n(u[0].getIframe()).data("autoplay")==1&&(f(),u[0].playVideo())))}function it(){p.find(".active").removeClass("active");l.eq(r).addClass("active")}function c(){b=setInterval(y,t.intervalSpeed)}function y(){r=r+1>=i.length?0:r+1;h()}function f(){clearInterval(b)}var g=n(this),p=n(this).find(".pagination ul"),nt=n(this).find(".keyVisualNavigation .gmprevious, .keyVisualNavigation .gmnext"),e=n(this).find(".visualContainer"),i=e.find(".visual"),l=null,w=n(this).hasClass("keyvisual"),tt=n(this).hasClass("animate"),b=null,r=0,a=0,o=!1,v=i.length,k,u,s;for(w?n(i).css({left:n(window).width()*2+"px"}):n(i).css({left:n(this).width()*2+"px"}),n(i[r]).css({left:"0px"}),n(i[r]).find(".c_keyVisual").addClass("current"),u=0,k=v;u<k;u++)$item=n('<li><a href=""><\/a><li>'),u==0?$item.find("a").addClass("active"):null,p.append($item);if(w)for(u=v-1;u>=0;u--)n(i[u]).css({"background-image":"url('"+n(i[u]).data("image")+"')"});nt.on("click",function(t){if(t.preventDefault(),f(),!o){var i=n(this);i.hasClass("gmprevious")?(r=r==0?v-1:--r,h(!0)):(r=r==v-1?0:++r,h(!1))}return!1});if(t.externalNavigation.length>0){t.externalNavigation.find("> li > a").on("mouseover",function(u){u.preventDefault();clearTimeout(t.externalNavTimeOut);f();n(this).data("visual")!=undefined?r=e.find(".visual[data-visual='"+n(this).data("visual")+"']").index():n(this).parent().index()<i.length&&(r=n(this).parent().index());r>=0&&(t.externalNavTimeOut=setTimeout(h,t.timeOutMouseOver))});t.externalNavigation.find("> li").on("mouseleave",function(){t.externalNavigation.find("> li.active").index()>=0&&(r=t.externalNavigation.find("> li.active").index());t.externalNavigation.find("> li.active").data("visual")!=undefined&&(r=e.find(".visual[data-visual='"+t.externalNavigation.find("> li.active").data("visual")+"']").index());r>=0&&(t.externalNavTimeOut=setTimeout(h,t.timeOutMouseOver))});i.find(".c_keyVisual").on("mouseover",function(){clearTimeout(t.externalNavTimeOut)})}l=p.find("a");l.on("click",function(t){if(t.preventDefault(),f(),!o){var i=n(this),u=l.index(i);r=u;h()}return!1});tt==!0&&n(document).ready(function(){c()});s=!1;i.find(".videoContainer").bind("playing",function(){f();s=!0});i.find(".videoContainer").bind("play",function(){f();s=!0});i.find(".videoContainer").bind("ended.video",function(){y();c();s=!1});i.find(".videoContainer").bind("ended",function(){y();c();s=!1});i.find(".c_keyVisual").on("mouseover",function(){f()});i.find(".c_keyVisual").on("mouseout",function(){s||c()})})},stopAnimation:function(){t.triggerStopByYoutubeVideo=!0},startAnimation:function(){t.triggerStopByYoutubeVideo=!1}},{init:function(){return t.methods.init()},stopAnimation:function(){return t.methods.stopAnimation()},startAnimation:function(){return t.methods.startAnimation()}}}($);cb.modules.leaveSiteDisclaimer=function(n){var t={};return t.prompt=n('<div id="promptLeaveSite" class="modal"><p>'+labels.EXTERNAL_LINK_DISCLAIMER+'<\/p><button class="agree">'+labels.I_AGREE_TAKE_ME_THERE+"<\/button>"+labels.OR+' <a class="cancel">'+labels.CANCEL+"<\/a><\/div>"),t.cancelButton=t.prompt.find("a.cancel"),t.url=null,t.modalOverlay=null,t.gaevent=null,t.gaaction=null,t.gavalue=null,t.methods={init:function(){t.prompt.appendTo("body");t.cancelButton.addClass("close");t.cancelButton.attr("href","javascript:void(0)");t.cancelButton.click(function(){n(this).parent().hide();n("#externalLinkLayer").hide()});t.modalOverlay=n('<div id="externalLinkLayer"><\/div>');var i="height:"+n(document).height()+"px; width:"+n(document).width()+"px;";i+="position:absolute; top:0; left:0; display:none;z-index:10000";t.modalOverlay.attr("style",i);t.modalOverlay.click(function(){n(this).hide();t.prompt.hide()});t.modalOverlay.appendTo("body");t.prompt.find("button").click(function(){t.gaaction&&t.gaevent&&t.gavalue&&initializeGoogleAnalyticsEvent(t.gaevent,t.gaaction,t.gavalue);t.cancelButton.trigger("click");window.open(t.url,"")});n("a.extern-disclaimer").click(function(){return t.url=n(this).attr("href"),t.gaevent=n(this).data("gaevent"),t.gaaction=n(this).data("gaaction"),t.gavalue=n(this).data("gavalue"),t.methods.showBox(),!1})},showBox:function(){t.modalOverlay.show();var i=(n(document).width()-t.prompt.width())/2,r=n(window).scrollTop()+(n(window).height()-t.prompt.height())/2;t.prompt.attr("style","top:"+r+"px; left:"+i+"px; z-index:11000");t.prompt.show()}},{init:function(){return t.methods.init()}}}($);cb.modules.featuresHotSpots=function(n){var t={};return t.app=n("div.featureApp"),t.agent=navigator.userAgent.toLowerCase(),t.touchOS="ontouchstart"in document.documentElement?!0:!1,t.mobileOS=typeof orientation!="undefined"?!0:!1,t.otherBrowser=t.agent.indexOf("series60")!=-1||t.agent.indexOf("symbian")!=-1||t.agent.indexOf("windows ce")!=-1||t.agent.indexOf("blackberry")!=-1,t.iOS=navigator.platform.indexOf("iPhone")!=-1||navigator.platform.indexOf("iPad")!=-1?!0:!1,t.android=t.agent.indexOf("android")!=-1||!t.iOS&&!t.otherBrowser&&t.touchOS&&t.mobileOS?!0:!1,t.featureImageHeight=248,t.methods={init:function(){t.app.length!=0&&(n("div.featureApp li").each(function(i){function w(t){var i=t.position().left,f=n(n("div.featureApp div.featureTooltip")[t.index()]);f.width()+h>p&&h-f.width()>0?(i=-c-7,a=c,s.find("div span").length==0&&r.append('<span class="tooltipArrowRight" style="top:'+e+"px; left:"+a+'px">&#160;<\/span>')):(i=57,s.find("div span").length==0&&r.append('<span class="tooltipArrowLeft" style="top:'+e+'px; ">&#160;<\/span>'));c=f.width();u=u+l;i=i+h;u=u-o;f.css("top",u+5);f.css("left",i)}var f,v;n(this).css("opacity",0);n(this).css("display","block");var s=n(this),y=n(this).html(),r=n(document.createElement("div"));r.attr("class","featureTooltip");r.append(y);f=n(this).parent().parent().find("img.featureImage");f.parent().append(r);var p=f.width(),b=f.height(),l=n(this).position().top,h=n(this).position().left,k=r.height(),c=r.width(),u=0,e=0,a=0,o=t.featureImageHeight;l-o<=-20&&(o=-3,v=r.find("img"),r.find("img").remove(),r.append(v));e=e+(o+8);r.find("img").load(function(){w(s)});n(this).delay(250*i).animate({opacity:1},400,function(){})}),t.touchOS||t.iOS||t.android?(n("div.featureApp li").mousedown(function(){var t=n(n("div.featureApp div.featureTooltip")[n(this).index()]);n("div.featureApp li").removeClass("hover");t.is(":visible")?t.stop(!0,!0).fadeOut(100):(n("div.featureTooltip").hide(),n(this).addClass("hover"),t.stop(!0,!0).fadeIn(300))}),n("div.featureApp img").mousedown(function(){n("div.featureApp li").removeClass("hover");n("div.featureTooltip").stop(!0,!0).fadeOut(100)})):n("div.featureApp li").mouseover(function(){var t=n(n("div.featureApp div.featureTooltip")[n(this).index()]);n(this).addClass("hover");t.stop(!0,!0).fadeIn(300)}).mouseout(function(){var t=n(n("div.featureApp div.featureTooltip")[n(this).index()]);n(this).removeClass("hover");t.stop(!0,!0).fadeOut(100)}))}},{init:function(){return t.methods.init()}}}($);cb.modules.tabs=function(n){var t={};return t.mainHolder=n(".jsTabs"),t.tabsListeners=[],t.methods={init:function(){t.mainHolder.length!=0&&t.mainHolder.each(function(){var i=n(this);i.find(".tabs ul li a, .tabs li a").bind("click.tabs",function(r){return r.preventDefault(),t.methods.activateTabs(i,n(this).parent().index()),!1})})},activateTabs:function(n,i){var f=n.find(".tabContent"),r=n.find(".tabs"),u;r.find("a").parent().removeClass("active");f.removeClass("open");u=r.find("li:eq("+i+") a").attr("href");r.find("li:eq("+i+") a").parent().addClass("active");n.find(u).addClass("open");t.mainHolder.trigger("tabactive",n.find(u))}},{init:function(){return t.methods.init()}}}($);cb.modules.countrySelector=function(n){var t={};return t.mainHolder=n(".jsCountrySelector"),t.countryLink=n("nav ul li a.country"),t.rmcActive=!0,t.cookieName="ymeDefaultSite",t.methods={init:function(){var i=n.cookie(t.cookieName);if(t.countryLink.length&&i!=null&&t.countryLink.bind("click",function(){n.cookie(t.cookieName,null,{expires:-1,path:"/"})}),t.mainHolder.length!=0){if(i!=null&&i.length){if(n.GetQueryStringParam("redirect")==="no"){n.GetQueryStringParam("pageid")!=null&&n.cookie(t.cookieName,null,{expires:-1,path:"/"});return}n.GetQueryStringParam("pageid")!=null&&n.GetQueryStringParam("pageid")!==0&&(i+="?redirect="+n.GetQueryStringParam("pageid"),n.GetQueryStringParam("referrer_pubid")!=null&&n.GetQueryStringParam("referrer_pubid")!==0&&(i+="&referrer_pubId="+n.GetQueryStringParam("referrer_pubid")),n.GetQueryStringParam("referrer_visualid")!=null&&n.GetQueryStringParam("referrer_visualid")!==0&&(i+="&referrer_visualId="+n.GetQueryStringParam("referrer_visualid")),n.GetQueryStringParam("referrer_qs")!=null&&n.GetQueryStringParam("referrer_qs")!==0&&(i+="&referrer_qs="+n.GetQueryStringParam("referrer_qs")));location.href=i;return}n(".countryContainer").bind("tabactive",function(i,r){n(r).data("rmc")===!0?(t.mainHolder.find(".userSettings").show(),t.rmcActive=!0):(t.mainHolder.find(".userSettings").hide(),t.rmcActive=!1)});t.mainHolder.find(".region a").bind("click",function(){if(t.rmcActive&&t.mainHolder.find('[name="remember"]').prop("checked")){var i=n.cookie("CookieSettings");(i==null||i!=null&&i.indexOf("f=1")!=-1)&&n.cookie(t.cookieName,n.GetSubString(n(this).attr("href"),"?"),{expires:364,path:"/"})}})}}},{init:function(){return t.methods.init()}}}($);cb.modules.backgroundCarrousel=function(n){function r(){i(t.index);t.index+1>=t.images.length?t.index=0:t.index++}function i(n){var r=t.mainHolder.find(".backgroundImage:eq("+t.last+")"),i=t.mainHolder.find(".backgroundImage:eq("+n+")");i.find("img").length==0&&(u(i),t.methods.stop());t.mainHolder.find(".backgroundImage").css({"z-index":0});r.css({"z-index":1});i.css({"z-index":2}).hide().fadeIn("slow");t.last=n}function u(i){var r=n('<img src="'+i.data("image")+'" />');i.append(r);r.load(function(){t.methods.start();i.css({"background-image":"url('"+n(this).attr("src")+"')","background-repeat":"no-repeat","background-position":"center top"})})}var t={};return t.mainHolder=n(".jsBackgroundCarrousel"),t.images=t.mainHolder.find(".backgroundImage"),t.interval=null,t.speed=7e3,t.index=0,t.last=0,t.methods={init:function(){t.mainHolder.length!=0&&(i(t.index),t.index++,t.methods.start())},start:function(){t.images.length>1&&(t.interval=setInterval(r,t.speed))},stop:function(){clearInterval(t.interval)}},{init:function(){return t.methods.init()}}}($);cb.modules.harmonica=function(n){function i(n,t){var i=!1;n.hasClass("min")?i=!1:n.hasClass("plus")&&(i=!0);t==!1?i=!1:t==!0&&(i=!0);i?(n.removeClass("plus").addClass("min"),n.next().show()):(n.removeClass("min").addClass("plus"),n.next().hide())}var t={};return t.mainHolder=n(".jsHarmonica"),t.firstOpen=!0,t.singleOpen=!1,t.expandAllButton=n("#expand"),t.closeAllText="collapse all",t.openAllText=t.expandAllButton.html(),t.methods={init:function(){t.mainHolder.length!=0&&(t.mainHolder.each(function(){var r=n(this).find(".min, .plus");n(this).hasClass("singleOpen")&&(t.singleOpen=!0);n.each(r,function(){n(this).hasClass("plus")&&n(this).next().hide()});t.firstOpen==!0&&i(n(r.get(0)),!0);r.bind("click.harmonica",function(){var u=n(this).hasClass("min");return t.singleOpen&&n.each(r,function(){i(n(this),!1)}),u?i(n(this),!1):i(n(this),!0),!1});n(this).find("a.clickTab").click(function(t){n(".jsTabs .tabs a[href='"+n(this).attr("href")+"']").click();t.preventDefault()})}),t.expandAllButton.bind("click.harmonica",function(r){r.preventDefault();var u,f=!1;return n(this).hasClass("min")?(u=t.mainHolder.find(".min"),n(this).removeClass("min").addClass("plus"),n(this).html(t.openAllText)):(u=t.mainHolder.find(".plus"),n(this).removeClass("plus").addClass("min"),n(this).html(t.closeAllText),f=!0),u.each(function(){i(n(this),f)}),!1}))}},{init:function(){return t.methods.init()}}}($);cb.modules.jsShare=function(){function t(n){return n==0?"":n}var n=$(this);return n.mainHolder=$(".jsShare"),n.populated=!1,n.open=!1,n.shareLabel=n.mainHolder.find("div.label:first"),n.countData=null,n.totalShareCount=0,n.methods={init:function(){n.shareLabel.length!==0&&($.each(n.mainHolder,function(){$(this).bind("click",function(){if(n.open)$(this).find(".share-dropdown").stop(!0,!0).fadeOut(),n.open=!1;else{if(n.populated==!1){var i=$(this);$.each(n.mainHolder,function(){n.countData&&n.countData.HTTP_Code!=401&&($(this).find(".sharecount.facebook").text(t(n.countData.Facebook.like_count)),$(this).find(".sharecount.googleplus").text(t(n.countData.GooglePlusOne)),$(this).find(".sharecount.twitter").text(t(n.countData.Twitter)),$(this).find(".sharecount.pinterest").text(t(n.countData.Pinterest)))});n.populated=!0;i.find(".share-dropdown").stop(!0,!0).fadeIn()}else $(this).find(".share-dropdown").stop(!0,!0).fadeIn();n.open=!0}$(this).bind("mouseleave",function(){$(this).find(".share-dropdown").stop(!0,!0).fadeOut(function(){n.open=!1})})})}),n.mainHolder.find("a").bind("click",function(n){return n.preventDefault(),n.stopPropagation(),window.open($(this).attr("href"),"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600"),!1}))}},{init:function(){return n.methods.init()}}}();cb.modules.backNavigationToMobileSite=function(n){var t={};return t.mainHolder=n(".general-content > div.header"),t.methods={init:function(){if(t.mainHolder.length!=0&&window._urlReferrer&&window._urlReferrer.match(labels.MobileSiteUrl)){var n="<div class='back-nav'><a href='{0}' class='txtbutton seeall rounded'>{1}<\/a><\/div>".format(window._urlReferrer,labels.BACK);t.mainHolder.prepend(n)}}},{init:function(){return t.methods.init()}}}($);cb.modules.homeNavigation=function(n){var t={};return t.mainHolder=n(".homepage-wrapper"),t.methods={init:function(){if(t.mainHolder.length!=0)t.mainHolder.find("nav > ul.worldclass > li").on("click",function(){n(this).find("a").trigger("click")})}},{init:function(){return t.methods.init()}}}($);cb.modules.worldNavigation.init();cb.modules.segmentNavigation.init();cb.modules.newsFeed.init();cb.modules.keyVisual.init();cb.modules.leaveSiteDisclaimer.init();cb.modules.featuresHotSpots.init();cb.modules.tabs.init();cb.modules.countrySelector.init();cb.modules.backgroundCarrousel.init();cb.modules.harmonica.init();cb.modules.jsShare.init();cb.modules.backNavigationToMobileSite.init();cb.modules.homeNavigation.init();cb.modules.addToWishList=function(){var n={};return n.mainHolder=$(".jsWishList"),n.methods={init:function(){var t=this;n.list=$(".jsWishList");n.list.each(function(){t.applyWishlist(this);$(this).find(".wishlist-box").hide()})},applyWishlist:function(t){var i=$(t);i.steps=$(t).find(".wishlist-steps .wishlist-box:has(a)");i.container=$(t).find(".wishlist-container");i.currentStep=0;i.closeTimeout=null;i.full=$(t).hasClass("full");i.fullPackage=$(t).hasClass("fullpackage");i.maxWidth=null;i.maxHeight=null;i.sizeSelector=$(t).siblings(".jsSizeSelector");i.colorSelector=$(t).siblings(".jsColorSelector");i.locationSelector=$(t).siblings(".jsLocationSelector");i.acc=this.setWishlistAccessoryData(t);$(".make-it-yours .accessories-holder li").css("height",$(".make-it-yours .accessories-holder").height());(i.full==!0||i.fullPackage==!0)&&(i.full==!0?(i.maxWidth=$(t).parent().outerWidth(),i.maxHeight=$(t).parent().outerHeight()):i.fullPackage==!0&&(i.maxWidth=$(t).parent().parent().outerWidth(),i.maxHeight=$(t).parent().parent().outerHeight()),i.container.width(i.maxWidth),i.container.height(i.maxHeight),i.find(".wishlist-box").width(i.maxWidth-parseInt(i.find(".wishlist-box").css("padding-left"),10)-parseInt(i.find(".wishlist-box").css("padding-right"),10)));n.methods.setWishlistState(i);$(t).on("click",function(n){n.stopPropagation()});$(t).on("mouseenter",function(){i.hasClass("open")||($(t).find(".wishlist-box").stop(!0,!0).hide(),$(t).find(".wishlist-hoverbox").stop().show(),i.container.show(),i.container.height($(t).find(".wishlist-hoverbox").height()+parseInt($(t).find(".wishlist-box").css("padding-top"),10)+parseInt($(t).find(".wishlist-box").css("padding-bottom"),10)),i.container.hide(),i.container.stop(!0,!0).fadeIn("fast"),i.find(".wishlist-button .icon .closed").fadeOut("fast"),i.find(".wishlist-button .icon .open").fadeIn("fast"),i.container.css("z-index","1"))});$(t).on("mouseleave",function(){i.hasClass("open")==!1&&n.methods.closeWishlist(i)});$(t).find(".wishlist-button .icon").on("click",function(r){r.preventDefault();r.stopPropagation();$(t).addClass("active");i.addClass("open");i.steps.length>0&&!i.hasClass("added")?n.methods.showStep(i,i.currentStep):n.methods.showThanks(i);$(document).on("click",function(){n.methods.closeWishlist(i);$(document).off("click")})});return $.each(i.steps,function(){$(this).find("a").off("click");$(this).find("a").on("click",function(t){t.preventDefault();t.stopPropagation();n.methods.handlingStepChoice($(this),i)})}),i.colorCarrousel=function(i){var r=i.find(".colorsbox a");i.container.show();i.container.find(".wishlist-box").show();var h=i.find(".colorsbox").outerWidth(),f=r.outerWidth()+parseInt(r.css("margin-left"),10)+parseInt(r.css("margin-right"),10),o=Math.floor((h-r.outerWidth()*2)/f);if(i.container.hide(),i.container.find("wishlist-box").hide(),f*r.length>h){var u=0,c=Math.ceil(r.length/o),s=$("<div class='colorCarousel'><\/div>");s.width(f*o);var l=$('<a href="#" class="btn-prev">Previous<\/a>'),a=$('<a href="#" class="btn-next">Next<\/a>'),e=$("<ul><\/ul>");$.each(r,function(){var n=$("<li><\/li>");n.append($(t).clone(!0));e.append(n)});e.find("a").on("click",function(r){r.preventDefault();r.stopPropagation();n.methods.handlingStepChoice($(t),i)});s.append(e);i.find(".colorsbox").append(l);i.find(".colorsbox").append(s);i.find(".colorsbox").append(a);l.on("click",function(n){n.preventDefault();n.stopPropagation();v(-1)});a.on("click",function(n){n.preventDefault();n.stopPropagation();v(1)});function v(n){u+n>=c?u=0:u+n<0?u=c-1:u+=n;e.animate({left:-(f*o*u)+"px"},200)}}}(i),i},showStep:function(t,i){var f,e,o,r,s,u;clearTimeout(t.closeTimeout);(t.acc.availableColours.length==1||t.acc.availableLocations.length==1||t.acc.availableSizes.length==1)&&t.acc.partcode&&$(t).find("input[name='acc_partcode']").val(t.acc.partcode);f=null;t.acc.availableColours.length==1?f=t.acc.availableColours[0]:t.colorSelector.length==1&&(r=$(t.colorSelector).find("a.active"),r.length==1&&(s=$(r).data("id"),u=t.acc.availableColours.filter(function(n){return n.id==s}),u.length==1&&(f=u[0])));f!=null&&(t.acc.color.id=f.id,t.acc.color.name=f.name,t.acc.color.partcode=f.partcode,i++);e=null;t.acc.availableSizes.length==1?e=t.acc.availableSizes[0]:t.sizeSelector.length==1&&(r=$(t.sizeSelector).find("a.active"),r.length==1&&(s=$(r).data("id"),u=t.acc.availableSizes.filter(function(n){return n.id==s}),u.length==1&&(e=u[0])));e!=null&&(t.acc.size.id=e.id,t.acc.size.name=e.name,t.acc.size.partcode=e.partcode,i++);o=null;t.acc.availableLocations.length==1?o=t.acc.availableLocations[0]:t.locationSelector.length==1&&(r=$(t.locationSelector).find("a.active"),r.length==1&&(s=$(r).data("id"),u=t.acc.availableLocations.filter(function(n){return n.id==s}),u.length==1&&(o=u[0])));o!=null&&(t.acc.location.id=o.id,t.acc.location.name=o.name,t.acc.location.partcode=o.partcode,i++);i<t.steps.length?(t.container.animate({height:$(t.steps[i]).height()+parseInt($(t.steps[i]).css("padding-top"),10)+parseInt($(t.steps[i]).css("padding-bottom"),10)},300),t.find(".wishlist-box:visible").length>0?t.find(".wishlist-box:visible").fadeOut("fast",function(){$(t.steps[i]).hide().stop().fadeIn("fast");t.currentStep=i}):(t.find(".wishlist-box").hide(),$(t.steps[i]).stop(!0,!0).fadeIn("fast"),t.currentStep=i)):n.methods.showThanks(t)},replaceText:function(n,t){$.each(n.find(".top-header p"),function(){var i=labels.ADD_TO_WISHLIST;n.acc.size.name&&n.acc.color.name?(i=labels.ADDED_TO_WISHLIST_COLOUR_AND_SIZE,i=i.replace("{0}",n.acc.name),i=i.replace("{1}",n.acc.color.name),i=i.replace("{2}",n.acc.size.name)):n.acc.size.name||n.acc.color.name?(i=labels.ADDED_TO_WISHLIST_COLOUR_OR_SIZE,i=i.replace("{0}",n.acc.name),i=i.replace("{1}",n.acc.size.name||n.acc.color.name)):(n.hasClass("added")&&n.acc.name&&(i=labels.ADDED_TO_WISHLIST.replace("{0}",n.acc.name)),t&&(i=labels.ADD_TO_WISHLIST));$(this).html(i)})},showThanks:function(t){clearTimeout(t.closeTimeout);t.hasClass("added")?t.find(".wishlist-box:visible").stop(!0,!0).fadeOut("slow",function(){t.full==!0||t.fullPackage==!0?(t.container.animate({height:t.maxHeight},300),t.find(".jsThanks").animate({height:t.maxHeight},300).fadeIn("slow")):(t.container.animate({height:t.find(".jsThanks").height()},300),t.find(".jsThanks").stop().fadeIn("slow"));t.find(".jsThanks .wishlistlink").delay("slow").fadeIn()}):(yam.wl.addCookie(t,!0),t.acc.multipleVariations||t.addClass("added"),this.replaceText(t),t.find(".wishlist-box:visible").stop(!0,!0).fadeOut("fast",function(){t.full==!0||t.fullPackage==!0?(t.container.animate({height:t.maxHeight},300),t.find(".jsThanks").animate({height:t.maxHeight},300).fadeIn("fast")):t.find(".jsThanks").stop().fadeIn("fast");t.find(".jsThanks .wishlistlink").delay("fast").fadeIn()}),t.closeTimeout=setTimeout(function(){n.methods.closeWishlist(t)},1e4),t.currentStep=0);t.acc=n.methods.setWishlistAccessoryData(t)},closeWishlist:function(t){clearTimeout(t.closeTimeout);t.removeClass("open");t.container.stop(!0,!0).fadeOut("slow",function(){t.currentStep=0});t.find(".wishlist-button .icon .closed").stop(!0,!0);t.find(".wishlist-button .icon .open").stop(!0,!0);n.methods.setWishlistState(t)},handlingStepChoice:function(t,i){var u=t.closest(".wishlist-box"),f=u.index(),r;u.find("a").removeClass("selected");t.addClass("selected");t.parent().data("name")==="familymodel"&&(i.acc.color.id=t.data("value"),i.acc.color.name=t.data("label"),i.acc.color.partcode=t.data("partcode"),r=t.data("modelcode"),$("div.colorsbox > a[data-modelcode='"+r+"']").show(),$("div.colorsbox > a[data-modelcode!='"+r+"']").hide(),i.acc.id=t.data("value"),i.acc.name=t.data("label"),i.acc.modelCode=r,i.acc.availableColours=i.acc.availableColours.filter(function(n){return n.modelcode===r}));t.parent().data("name")==="color"&&(i.acc.color.id=t.data("value"),i.acc.color.name=t.data("label"),i.acc.color.partcode=t.data("partcode"));t.parent().data("name")==="size"&&(i.acc.size.id=t.data("value"),i.acc.size.name=t.data("label"),i.acc.size.partcode=t.data("partcode"));t.parent().data("name")==="location"&&(i.acc.location.id=t.data("value"),i.acc.location.name=t.data("label"),i.acc.location.partcode=t.data("partcode"));t.data("partcode")&&(i.acc.partcode=t.data("partcode"),$(i).find("input[name='acc_partcode']").val(i.acc.partcode));n.methods.showStep(i,f+1)},setWishlistState:function(t){yam.wl.existsInCookie(t.acc)?(t.acc.multipleVariations||t.addClass("added"),n.methods.replaceText(t),t.find(".wishlist-button .icon .closed").hide(),t.find(".wishlist-button .icon .open").show(),t.find(".topheader .button").attr("style","display:block")):(t.removeClass("added"),n.methods.replaceText(t,t.acc.availableColours.length==0&&t.acc.availableLocations.length==0&&t.acc.availableSizes.length==0),t.find(".wishlist-button .icon .closed").show(),t.find(".wishlist-button .icon .open").hide(),t.find(".topheader .button").attr("style","display:none"))},setRemoveFromWishlistButtonState:function(n,t){$.each(n.find(".top-header .button"),function(){if($(this).attr("style",t?"display:block":"display:none"),t)$(this).on("click",function(n){n.preventDefault()})})},setWishlistAccessoryData:function(n){var t=$(n);return t.acc={id:t.find("input[name='acc_id']").val(),type:t.find("input[name='acc_type']").val(),name:t.find("input[name='acc_name']").val(),size:{id:"",name:"",partcode:""},color:{id:"",name:"",partcode:""},location:{id:"",name:"",partcode:""},modelCode:t.find("input[name='model_code']").val()?t.find("input[name='model_code']").val():null,modelYear:t.find("input[name='model_year']").val()?t.find("input[name='model_year']").val():null,partcode:t.find("input[name='acc_partcode']").val()?t.find("input[name='acc_partcode']").val():null},t.acc.availableColours=[],t.acc.availableSizes=[],t.acc.availableLocations=[],t.find(".colorsbox a").each(function(){var n={id:$(this).data("value"),name:$(this).data("label"),partcode:$(this).data("partcode"),modelcode:$(this).data("modelcode")};t.acc.availableColours.push(n)}),t.find(".sizesbox a").each(function(){var n={id:$(this).data("value"),name:$(this).data("label"),partcode:$(this).data("partcode")};t.acc.availableSizes.push(n)}),t.find(".locationsbox a").each(function(){var n={id:$(this).data("value"),name:$(this).data("label"),partcode:$(this).data("partcode")};t.acc.availableLocations.push(n)}),t.acc.multipleVariations=t.acc.availableColours.length>1||t.acc.availableSizes.length>1||t.acc.availableLocations>1,t.acc}},{init:function(){return n.methods.init()},applyWishlist:function(t){return n.methods.applyWishlist(t)},setWishlistState:function(t){return n.methods.setWishlistState(t)}}}($);cb.modules.wishListView=function(n){function f(){if(!t.populated){var i=yam.wl.getCookieValues();i!=null&&e(n(i).get(-1),function(n){var i,r;if(n.length>0){if(n[0].Accessories!=null&&n[0].Accessories.length>0)for(t.container.find(".box-left").html(""),i=0;i<n[0].Accessories.length;i++)t.container.find(".box-left").append('<img alt="" class="packageImage" src="'+n[0].Accessories[i].MainImage.getResizeUrl(39,39)+'"/>');else t.container.find(".box-left").html('<img alt=""/>'),r=n[0].MainImage!=null?n[0].MainImage:"",t.container.find(".box-left img").attr("src",r.getResizeUrl(120,120));t.container.find(".box-right h4").html(n[0].Title);t.container.find(".box-right h5").html(n[0].Code);n[0].Price>0&&(t.container.find(".box-right .price").html(n[0].Price),formatPriceDisplay(t.container.find(".box-right .price")));t.populated=!0}})}}function e(t,i){if(t!=null){var r=labels.ApiUrl+"api/"+labels.PublicationId+"/wishlist/get/"+t;n.ajax({dataType:"json",url:r,crossDomain:!0,success:i,error:function(n,t,i){console.log("AJAX Error",i)}})}}function o(t,i){if(t!=null){var r=t.split("|"),u=labels.ApiUrl+"api/"+labels.PublicationId+"/accessories/details/"+r[0];r.length>5&&r[5]!=""&&(u+="/"+r[5]);r.length>6&&r[6]!=""&&(u+="/"+r[6]);n.ajax({dataType:"json",url:u,crossDomain:!0,success:i,error:function(n,t,i){console.log("AJAX Error",i)}})}}function s(){clearTimeout(t.autoClose)}function h(){clearTimeout(t.autoClose);t.autoClose=setTimeout(r,t.autoClosetime)}function c(){var n=window.location.href,i="?p="+escape(n)+"&t="+document.title;t.box.find(".box-right a").attr("href",t.box.find(".box-right a").data("url")+i);t.isOpen?r():u()}function u(){f();t.box.stop(!0,!0).slideDown(t.slideTime);t.isOpen=!0;n(document).bind("click.gwl",function(){r();n(document).unbind("click.gwl")})}function r(){t.box.stop(!0,!0).slideUp(t.slideTime);t.isOpen=!1;n(document).unbind("click.gwl")}function l(){var r=yam.wl.getCookieValues();t.container.find(".box-container p.message").html("").hide();o(n(r).get(-1),function(n){if(n!=null){var t;n.NecessaryParts!=null&&(t=y(n.NecessaryParts),t.length>0&&a(t));n.ConflictingParts!=null&&(t=p(n.ConflictingParts),t.length>0&&v(t,n))}});r==null||t.container.is(":visible")||t.container.show();i();t.populated=!1;u()}function a(n){for(var u,f,r=0;r<n.length;r++)u={acc:{id:n[r].Id,type:"a",color:{id:""},size:{id:""}}},yam.wl.addCookie(u,!1);i();f=labels.NECESSARY_PARTS_ADDED.replace("{0}",n.length);t.container.find(".box-container p.necessary").html(f).show()}function v(n,r){var f,u;for(i(),f=labels.WISHLIST_CONFLICTS_WITH.replace("{0}",r.Title),u=0;u<n.length;u++)f+="<br/>- "+n[u].Title;t.container.find(".box-container p.conflicts").html(f).show()}function y(n){for(var f,u,e=[],i=yam.wl.getCookieValues(),o=[],r,t=0;t<i.length;t++)r=i[t].split("|"),o.push(r[0]);for(t=0;t<n.length;t++){for(f=!1,u=0;u<i.length;u++)r=i[u].split("|"),r[0]==n[t].Id&&(f=!0);f||e.push(n[t])}return e}function p(n){for(var f,i,r=[],u=yam.wl.getCookieValues(),e=[],t=0;t<n.length;t++)e.push(n[t].Id);for(t=0;t<u.length;t++)for(f=u[t].split("|"),i=0;i<n.length;i++)n[i].Id==f[0]&&r.push(n[i]);return r}function i(){var n=yam.wl.getCookieValues();n!=null?(t.container.find(".count").html(n.length),t.container.show()):t.container.hide()}var t={};return t.container=n(".jsWishListView"),t.hitbox=t.container.find(".hitarea"),t.box=t.container.find(".jsWishListViewBox"),t.isOpen=!1,t.autoClose=null,t.autoClosetime=3e3,t.slideTime=550,t.populated=!1,t.methods={init:function(){if(t.container.length!=0){t.hitbox.on("click",function(n){n.stopPropagation();c()});t.container.on("mouseleave",function(){h()}).on("mouseenter",function(){s()});n(document).on("addNew",l);var r=yam.wl.getCookieValues();r!=null&&i()}}},{init:function(){return t.methods.init()},setCount:function(){return i()}}}($);cb.modules.emailWishlist=function(){var n={};return n.mainHolder=$(".jsEmailWishlist"),n.boxes=n.mainHolder.find(".emailwish, .finish"),n.btnopen=$(".settings-bottom .emailicon"),n.inputs=n.mainHolder.find(".email"),n.submits=n.mainHolder.find("form"),n.scrollWin=n.mainHolder.find(".sendmail-window"),n.loader=n.mainHolder.find(".jsWishListSaveLoader"),n.vals=[],n.methods={init:function(){n.mainHolder.length!=0&&(n.inputs.each(function(){n.vals.push($(this).val())}),n.methods.startEvents())},resetForms:function(){},startEvents:function(){n.btnopen.on("click",function(t){t.preventDefault();n.methods.open()});n.inputs.each(function(t){var i=$(this);i.on({focus:function(){i.val()===n.vals[t]&&i.val("")},blur:function(){(i.val()===n.vals[t]||i.val()==="")&&i.val(n.vals[t])}})});n.submits.each(function(){$(this).submit(function(t){var r,e;t.preventDefault();var i=$(this),u=yam.wl.getProductConfiguratorGuid(),f=yam.wl.getProductConfiguratorModel(),o=window.location.href+(u?"&config="+ConfiguratorConfig.Guid+"&mobileRedirect=no":""),s={Value:yam.wl.getCookie(),ReturnLink:o,ReturnLinkText:$(document).find("title").text(),PriceHelperSupportInfo:{ShowPriceWithoutDecimals:labels.ShowPriceWithoutDecimals,ShowCurrencySymbolAfterPrice:labels.ShowCurrencySymbolAfterPrice,ShowPriceWithDash:labels.ShowPriceWithDash,FirstCurrency:labels.CurrencySymbol,FallBackEmptyPriceText:labels.NOT_AVAILABLE,UiCultureName:labels.UiCultureName}};i.find("#wishlistitems").val(JSON.stringify(s));r=i.find("#emailTo");e=i.find("#emailFrom");r.removeClass("error");e.removeClass("error");n.methods.checkEmail(r)?(n.loader.show(),$.ajax({url:labels.ApiUrl+"api/"+labels.PublicationId+"/wishlist/email",dataType:"json",method:"POST",data:i.serializeArray(),success:function(t){n.loader.hide();t==!0?(n.methods.showMessage(labels.WISHLIST_SAVED_THANKYOU,labels.WISHLIST_EMAIL_SENT),initializeGoogleAnalyticsEvent(u?window.GAEvents.Configurator:window.GAEvents.ProductPage,window.GAActions.Wishlist,(f?f.name+" | ":"")+window.GAActions.Email)):n.methods.showMessage(labels.GENERAL_ERROR,labels.SENDTOFRIEND_ERROR)},error:function(){n.loader.hide();n.methods.showMessage(labels.GENERAL_ERROR,labels.SENDTOFRIEND_ERROR)}})):r.addClass("error")})})},checkEmail:function(n){function t(n){var t=new RegExp(/^(("[\w-+\s]+")|([\w-+]+(?:\.[\w-+]+)*)|("[\w-+\s]+")([\w-+]+(?:\.[\w-+]+)*))(@((?:[\w-+]+\.)*\w[\w-+]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][\d]\.|1[\d]{2}\.|[\d]{1,2}\.))((25[0-5]|2[0-4][\d]|1[\d]{2}|[\d]{1,2})\.){2}(25[0-5]|2[0-4][\d]|1[\d]{2}|[\d]{1,2})\]?$)/i);return t.test(n)}return t(n.val())?!0:!1},close:function(){n.methods.resetForms();n.mainHolder.stop(!0,!0).fadeOut(function(){n.boxes.first().show();n.boxes.not(":eq(0)").hide();n.scrollWin.css("margin-left",0)});$(document).off("click")},showMessage:function(t,i){var r=n.boxes.last();r.find("h2").text(t);r.find("p").text(i);r.show();n.scrollWin.animate({"margin-left":"-=330px"})},open:function(){n.mainHolder.stop(!0,!0).fadeIn(function(){$(document).on("click",function(){n.methods.close();$(document).off("click")})});n.mainHolder.on("click",function(n){n.stopPropagation()})}},{init:function(){return n.methods.init()},close:function(){return n.methods.close()},open:function(){return n.methods.open()}}}();cb.modules.saveToProfile=function(n){var t={};return t.mainHolder=n(".jsSaveToProfile"),t.boxes=t.mainHolder.find(".signin, .register, .forgotten, .finish"),t.btnopen=n(".settings-top .save"),t.actualForm=n(t.boxes[0]),t.scrollWin=t.mainHolder.find(".savetoprofile-window"),t.loader=t.mainHolder.find(".jsWishListSaveLoader"),t.animTime=600,t.submits=t.mainHolder.find("form"),t.inputs=t.mainHolder.find(".email"),t.pswds=t.mainHolder.find(".pswd, .repswd"),t.vals=[],t.methods={init:function(){t.mainHolder.length!=0&&(t.inputs.each(function(){t.vals.push(n(this).val())}),t.methods.startEvents())},resetForms:function(){n(".finish a").hide();t.inputs.each(function(i){n(this).val(t.vals[i]);n(this).removeClass("error")});t.pswds.each(function(){var t=n(this);t.val("");t.removeClass("error");t.removeClass("selected")})},startEvents:function(){t.btnopen.on("click",function(i){i.preventDefault();t.mainHolder.stop(!0,!0).fadeIn(function(){n(document).on("click",function(){t.methods.resetForms();t.mainHolder.stop(!0,!0).fadeOut(function(){t.boxes.first().show();t.boxes.not(":eq(0)").hide();t.scrollWin.css("margin-left",0)});n(document).off("click")})});t.mainHolder.on("click",function(n){n.stopPropagation()})});t.inputs.each(function(i){var r=n(this);r.on({focus:function(){r.val()===t.vals[i]&&r.val("")},blur:function(){(r.val()===t.vals[i]||r.val()==="")&&r.val(t.vals[i])}})});t.pswds.each(function(){n(this).on({focus:function(){var t=n(this);_span=t.parent().find("span");t.val()===""&&t.addClass("selected")},blur:function(){var t=n(this);_span=t.parent().find("span");t.val()===""&&t.removeClass("selected")}})});t.submits.each(function(){n(this).submit(function(i){var r,f,u,e;i.preventDefault();r=n(this);f=r.attr("id");n(".finish a").hide();switch(f){case"save":u=r.find(".email");e={email:u.val(),action:"save",publicationid:labels.PublicationId};t.methods.checkEmail(u)&&t.methods.saveToProfile(r,!0)}})})},checkEmail:function(n){function t(n){var t=new RegExp(/^(("[\w-+\s]+")|([\w-+]+(?:\.[\w-+]+)*)|("[\w-+\s]+")([\w-+]+(?:\.[\w-+]+)*))(@((?:[\w-+]+\.)*\w[\w-+]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][\d]\.|1[\d]{2}\.|[\d]{1,2}\.))((25[0-5]|2[0-4][\d]|1[\d]{2}|[\d]{1,2})\.){2}(25[0-5]|2[0-4][\d]|1[\d]{2}|[\d]{1,2})\]?$)/i);return t.test(n)}return t(n.val())?!0:!1},saveToProfile:function(i,r){var u={email:i.find(".email").val(),action:"save",publicationid:labels.PublicationId};n.ajax({type:"POST",data:u,dataType:"json",url:labels.SiteUrl+"/WishListHandler.ashx",success:function(n){if(t.loader.hide(),n.Success)if(r){var i=labels.WISHLIST_SAVEDTO_PROFILE+"<br/>"+labels.YOU_HAVE_X_ITEMS_IN_WISHLIST.replace("{0}",n.Message);t.methods.showMessage(labels.WISHLIST_SAVED_THANKYOU,i)}else t.methods.showMessage(labels.WISHLIST_SAVED_THANKYOU,labels.TEMPORARY_PROFILE_CREATED);else t.methods.showMessage(labels.GENERAL_ERROR,n.Message)},error:function(n,t,i){console.log("AJAX Error",i)}})},showMessage:function(n,i){var r=t.boxes.last();r.find("h2").text(n);r.find("p").html(i);r.show();t.scrollWin.animate({"margin-left":"-=330px"})}},{init:function(){return t.methods.init()}}}($);cb.modules.globalWishlist=function(n){var t={};return t.mainHolder=n(".jsGlobalWishlist"),t.list=t.mainHolder.find(".wishlist-list li"),t.listHolder=t.mainHolder.find(".wishlist-list"),t.removeall=t.mainHolder.find(".removeall"),t.priceholder=t.mainHolder.find(".totalprice span:last-child"),t.h2=t.mainHolder.find(".header .wrap h2"),t.pagination=t.mainHolder.find(".pagination"),t.pages=t.pagination.find(".pagination-holder"),t.prices=t.pagination.find(".totalprice"),t.footNote=t.pagination.find(".totalPriceFootnote"),t.animTime=600,t.actualPage=0,t.totalPages=0,t.numActive=0,t.totalprice=0,t.leftprev=t.pagination.find(".previous"),t.leftnext=t.pagination.find(".next"),t.sorts=n(".sort-types li"),t.payload=[],t.orig=[],t.mainHolderH=t.mainHolder.height()-t.mainHolder.find(".wishlist-list").height(),t.busy=!1,t.methods={init:function(){t.mainHolder.length!=0&&(n.each(t.list,function(){var i=n(this);t.orig.push({i:i.data("id"),p:i.data("price"),d:i.data("date"),obj:i});i.remove()}),t.pages.hide(),t.prices.hide(),t.methods.startEvents(),t.methods.displayData())},displayData:function(){for(var u,i=t.actualPage*10,f=i+10<t.orig.length?i+10:t.orig.length,r=i;r<f;r++)t.methods.addNewItem(r);t.methods.paginationController();t.methods.calculateTotalPrice();t.methods.calculateItems();u=t.listHolder.height();t.mainHolder.find(".wishlist-wrap").stop(!0,!0).animate({height:u},600,function(){n(this).css("height","auto");t.busy=!1})},paginationController:function(){var i,r;for(t.pages.find("ul").empty(),t.totalPages=Math.ceil(t.orig.length/10),t.orig.length>0&&t.prices.show(),t.orig.length>9?(t.pages.show(),t.actualPage===0?t.leftprev.css({opacity:0,cursor:"default"}):t.leftprev.css({opacity:1,cursor:"pointer"}),t.actualPage===t.totalPages-1?t.leftnext.css({opacity:0,cursor:"default"}):t.leftnext.css({opacity:1,cursor:"pointer"})):t.pages.hide(),i=1;i<=t.totalPages;i++)r='<li><a class="'+(t.actualPage+1===i?"active":"")+' transition" href="#'+i+'" title="">'+i+"<\/a><\/li>",t.pagination.find("ul").append(r);t.pagination.find("li a").each(function(){n(this).on("click",function(){t.busy||(t.actualPage=parseInt(n(this).text())-1,t.methods.setNewPage())})})},setNewPage:function(){t.busy=!0;var i=t.mainHolder.find(".wishlist-list li"),r=i.length;t.mainHolder.find(".wishlist-wrap").css({height:t.listHolder.height()});r>0?i.each(function(){n(this).fadeOut(200,function(){n(this).remove();--r||t.methods.displayData()})}):t.methods.displayData()},calculateTotalPrice:function(){var n,i,u,r;for(t.totalprice=0,n=0,i=0,u=t.orig.length;i<u;i++)r=String(t.orig[i].p).replace(",","."),!isNaN(r)&&r>0?t.totalprice+=parseFloat(r):n++;t.priceholder.text(t.totalprice);formatPriceDisplay(t.priceholder);n>0&&n<t.orig.length?(t.priceholder.html(t.priceholder.text()+"<sup>**<\/sup>"),t.footNote.show()):t.footNote.hide();t.totalprice===0&&t.prices.hide()},calculateItems:function(){var n=t.orig.length===0?0:t.actualPage*10+1,i=t.orig.length===0?0:n+9<t.orig.length?n+9:t.orig.length;t.orig.length===1?t.h2.html(t.orig.length+" "+labels.ITEM+" <span>"+labels.SHOWING_ITEMS.format(n,i)+"<\/span>"):t.h2.html(t.orig.length+" "+labels.ITEMS+" <span>"+labels.SHOWING_ITEMS.format(n,i)+"<\/span>")},removeEvents:function(i){i.find(".remove").on("click",function(i){if(i.preventDefault(),!t.busy){var e=n(this),r=e.parent(),u=r.data("id"),o=r.data("partcode"),s=r.data("color"),h=r.data("type"),f={id:u,partcode:o,color:s,type:h};yam.wl.removeItem(f,r.animate({height:0},300,function(){n(this).remove();for(var i=0,r=t.orig.length;i<r;i++)if(t.orig[i].i===u)return t.orig.splice(i,1),t.methods.addNewItem(i,!0),!1;return!0}));initializeGoogleAnalyticsEvent(window.GAEvents.Wishlist,window.GAActions.DeleteItem,f.partcode)}})},addNewItem:function(i,r){var f,u;if(r&&t.mainHolder.find(".wishlist-wrap").css({height:t.mainHolder.find(".wishlist-list").height()}),i===t.orig.length&&t.totalPages!==Math.ceil(t.orig.length/10))return t.leftprev.trigger("click"),!1;f=r?t.actualPage*10+9:i;t.orig.length>f&&(u=t.orig[f].obj,u.hide(),t.methods.removeEvents(u),t.listHolder.append(u),u.fadeIn(200,function(){if(r){var i=t.mainHolder.find(".wishlist-list").height();t.mainHolder.find(".wishlist-wrap").stop(!0,!0).animate({height:i},800,function(){n(this).css("height","auto")})}}));r&&(t.methods.paginationController(),t.methods.calculateTotalPrice(),t.methods.calculateItems())},startEvents:function(){t.removeall.on("click",function(i){i.preventDefault();var u=t.mainHolder.find(".wishlist-list"),r=t.mainHolder.find(".wishlist-list li"),f=r.length;t.mainHolder.find(".wishlist-wrap").css({height:u.height()});yam.wl.removeAll(r.each(function(){n(this).fadeOut(function(){if(n(this).remove(),!--f){t.orig=[];t.methods.paginationController();t.methods.calculateTotalPrice();t.methods.calculateItems();var i=u.height();t.mainHolder.find(".wishlist-wrap").stop(!0,!0).animate({height:i},800,function(){n(this).css("height","auto")})}})}));r.length>0&&initializeGoogleAnalyticsEvent(window.GAEvents.Wishlist,window.GAActions.ClearWishlist,(new Date).format("dd/mm/yyyy hh:MM:ss TT"))});t.leftprev.on("click",function(n){n.preventDefault();t.busy||(t.actualPage>0&&--t.actualPage,t.methods.setNewPage())});t.leftnext.on("click",function(n){n.preventDefault();t.busy||(t.actualPage<t.totalPages-1&&++t.actualPage,t.methods.setNewPage())});t.sorts.on("click",function(i){i.preventDefault();var r=n(this);t.busy||r.find("a").hasClass("active")||(t.sorts.find("a").removeClass("active"),r.find("a").addClass("active"),t.methods.sortItems(r.data("sort")))})},sortItems:function(i){var r,u,f;if(!(t.orig.length<1)){r=t.mainHolder.find(".wishlist-list li");u=r.length;r.each(function(){n(this).fadeOut(200,function(){n(this).remove();--u||t.methods.displayData()})});f=t.mainHolder.find(".wishlist-list");t.mainHolder.find(".wishlist-wrap").css({height:f.height()});switch(i){case"new-old":t.orig=t.orig.sort(function(n,t){return t.d-n.d});break;case"old-new":t.orig=t.orig.sort(function(n,t){return n.d-t.d});break;case"low-high":t.orig=t.orig.sort(function(n,t){return n.p-t.p});break;case"high-low":t.orig=t.orig.sort(function(n,t){return t.p-n.p})}}}},{init:function(){return t.methods.init()}}}($),function(n){this.yam=this.yam||{};yam.wl=yam.wl||{};var i="ymewishlist",t=364,f=labels.SiteUrl,r=null,u=null;yam.wl.addCookie=function(i,r){var o=this.getCookie(),f="",u=i.acc.id+"|"+i.acc.type+"|"+i.acc.size.id+"|"+i.acc.color.id,e;if(i.acc.partcode&&i.acc.partcode!=="null"?(u+="|"+i.acc.partcode,f+="|"+i.acc.partcode):i.acc.color!=null&&i.acc.color.partcode!=null&&i.acc.color.partcode!==""?(u+="|"+i.acc.color.partcode,f+="|"+i.acc.color.partcode):i.acc.size!=null&&i.acc.size.partcode!=null&&i.acc.size.partcode!==""?(u+="|"+i.acc.size.partcode,f+="|"+i.acc.size.partcode):i.acc.location!=null&&i.acc.location.partcode!=null&&i.acc.location.partcode!==""?(u+="|"+i.acc.location.partcode,f+="|"+i.acc.location.partcode):u+="|",i.acc.color!=null&&i.acc.color.name!=null&&i.acc.color.name!=""&&(f+="|"+i.acc.color.name),u+=i.acc.modelCode&&i.acc.modelCode!="null"?"|"+i.acc.modelCode:"|",u+=i.acc.modelYear&&i.acc.modelYear!="null"?"|"+i.acc.modelYear:"|",u+=i.acc.additionalVersion&&i.acc.additionalVersion!="null"?"|"+i.acc.additionalVersion:"|",u+=i.acc.location&&i.acc.location!="null"?"|"+i.acc.location.id:"|",o==null?this.setCookie(u,t):this.existsInCookie(i.acc)||this.setCookie(o+","+u,t),r&&(e=n.Event("addNew"),e.wishlist=i,n(document).trigger(e)),i.acc!=null&&i.acc.name)switch(i.acc.type){case"m":initializeGoogleAnalyticsEvent(window.GAEvents.ProductPage,window.GAActions.Wishlist,f);break;case"a":initializeGoogleAnalyticsEvent(window.GAEvents.Accessories,window.GAActions.Wishlist,f)}};yam.wl.getCookie=function(){return n.cookie(i)};yam.wl.setCookie=function(t,r){n.cookie(i,t,{expires:r,path:f})};yam.wl.getCookieValues=function(){var n=this.getCookie();return n!=null?n.split(","):null};yam.wl.getCookieItem=function(n,t){var f=null,r=this.getCookieValues(),i,u;if(r!=null)for(i=0;i<r.length;i++)if(u=r[i].split("|"),parseInt(u[0])===n&&(u[1]==="m"||u[4]===t)){f=r[i];break}return f};yam.wl.getCookieTotalItems=function(n){var r=[],i=this.getCookieValues(),t,u;if(i!=null)for(t=0;t<i.length;t++)u=i[t].split("|"),parseInt(u[0])===n&&r.push(i[t]);return r};yam.wl.removeItem=function(n,i){var u,f,r,o;if(this.existsInCookie(n)){for(u=this.getCookieValues(),f=[],r=0;r<u.length;r++){var e=u[r].split("|"),s=parseInt(e[0]),h=e[4],c=e[3];s!==n.id&&(n.partcode&&h!==n.partcode?f.push(u[r]):c!==n.color&&f.push(u[r]))}o=f.length>0?t:-1;this.setCookie(f,o);cb.modules.wishListView.setCount();i}};yam.wl.removeAll=function(n){this.setCookie(null,-1);cb.modules.wishListView.setCount();n};yam.wl.existsInCookie=function(n){var t=parseInt(typeof n=="object"?n.id:n);return this.getCookieItem(t,n.partcode)!=null};yam.wl.setProductConfiguratorGuid=function(n){r=n};yam.wl.getProductConfiguratorGuid=function(){return r};yam.wl.setProductConfiguratorModel=function(n){u=n};yam.wl.getProductConfiguratorModel=function(){return u}}($);$("div.settings-bottom a.jsWishListDownload").click(function(n){var i=labels.ApiUrl+"api/"+labels.PublicationId+"/wishlist/pdf",r={Value:$.cookie("ymewishlist"),PriceHelperSupportInfo:{ShowPriceWithoutDecimals:labels.ShowPriceWithoutDecimals,ShowCurrencySymbolAfterPrice:labels.ShowCurrencySymbolAfterPrice,ShowPriceWithDash:labels.ShowPriceWithDash,FirstCurrency:labels.CurrencySymbol,FallBackEmptyPriceText:labels.NOT_AVAILABLE,UiCultureName:labels.UiCultureName}},t=$("<form method='POST' action='"+i+"' class='hidden'><input type='text' name='cookieValue' value='"+JSON.stringify(r)+"' /><\/form>");$(this).parent().append(t);t.submit();n.preventDefault()});cb.modules.addToWishList.init();cb.modules.wishListView.init();cb.modules.emailWishlist.init();cb.modules.saveToProfile.init();cb.modules.globalWishlist.init();cb.modules.mediaGallery=function(n){function i(n,t,i){var r=document.createElement("script"),u;r.src=t;u=!1;r.onload=r.onreadystatechange=function(){u||this.readyState&&this.readyState!="loaded"&&this.readyState!="complete"||(u=!0,i(),r.onload=r.onreadystatechange=null)};setTimeout(function(){n.appendChild(r)},500)}function r(){n(this).find(".bb_wrapper").length>0&&n(this).find(".bb_wrapper").is(":visible")?n(this).hasClass("paused")?(n(this).find(".bb_wrapper")[0].call("play"),n(this).removeClass("paused")):(n(this).find(".bb_wrapper")[0].call("pause"),n(this).addClass("paused")):setTimeout(function(){n(".wrap.VideoGallery").find(".thumbs-holder a:eq(0)").removeClass("active").trigger("click")},500);n(this).find(".btn-bigplay").removeClass("show")}var t={};return t.mainHolder=n(".jsMediaGallery"),t.modules=["ImageGallery","VideoGallery","360Gallery"],t.actModule=null,t.actVideo=null,t.buttonHide=t.mainHolder.find(".hide"),t.buttonPrev=t.mainHolder.find(".gmprevious"),t.buttonNext=t.mainHolder.find(".gmnext"),t.buttonDown=t.mainHolder.find(".download"),t.buttonTogg=t.mainHolder.find(".toggle-panel"),t.buttonNavp=t.mainHolder.find(".nav-panel"),t.buttonNavN=t.buttonNavp.find(".next-small"),t.buttonNavR=t.buttonNavp.find(".previous-small"),t.buttonVide=t.buttonTogg.find(".video"),t.buttonr360=t.buttonTogg.find(".rot360"),t.buttonGall=t.buttonTogg.find(".image"),t.timerTime=1e3,t.panelsActive=!0,t.animTime=350,t.timeout=null,t.lastimg=t.newimage=0,t.cache=[],t.firstload=!0,t.navArrows=!1,t.moduleType=!0,t.animating=!1,t.busy=!1,t.switching=!1,t.page=1,t.maxPages=2,t.hashParameters=[],t.activeOnLoad=n(".wrap.ImageGallery.inactive").length&&window.location.hash==""?!1:!0,t.imageCount=t.mainHolder.find(".ImageGallery .thumbs-holder li").find("a").length||0,t.videoCount=t.mainHolder.find(".VideoGallery .thumbs-holder li").find("a").length||0,t.methods={init:function(){var r,i;if(n("#imgAccessoiresImage").length>0&&n(".thumbs-holder li").find("a").each(function(){return n(this).addClass("active"),!1}),t.mainHolder.length!=0){t.navArrows=t.methods.navArrowsState();r=t.buttonTogg.find("a").length;t.buttonTogg.css({width:54*r+10});for(i in t.modules)t.mainHolder.hasClass(t.modules[i])&&(t.actModule=t.modules[i]);t.methods.thumbsPanelArrows();t.actModule?(t.buttonTogg.hide(),t.mainHolder.find(".wrap."+t.actModule).fadeIn(function(){n(this).addClass("active")})):(t.buttonGall.addClass("active"),t.actModule=t.buttonTogg.find("a.image")?t.mainHolder.find(".wrap.ImageGallery"):t.buttonTogg.find("a.video")?t.mainHolder.find(".wrap.VideoGallery"):t.mainHolder.find(".wrap.360Gallery"),t.actModule.show(),t.actModule.addClass("active"));t.navArrows&&(t.buttonNavN.addClass("active"),t.buttonNavR.addClass("active"));t.buttonDown.hide();t.buttonDown.on("click",function(t){t.preventDefault();window.open(n(this).attr("href"));var i=n.GetQueryStringParam("f",n(this).attr("href"));i&&initializeGoogleAnalyticsEvent(window.GAEvents.ProductPage,window.GAActions.Download,i)});t.mainHolder.find(".wrap.VideoGallery .video").prepend('<div class="btn-bigplay show">bigplay<\/div>');t.methods.startEvents();t.timeout=setTimeout(t.methods.hidePanels,t.timerTime);t.hashParameters=t.methods.setParametersFromHash();t.methods.loadFromUrl()}},setParametersFromHash:function(){var r=unescape(window.location.hash.substring(1)),t=r.split("|"),u=[],n,i;if(r!="")for(n=0;n<t.length;n++)i=t[n].indexOf("="),u.push([t[n].substring(0,i),t[n].substring(i+1,t[n].length)]);return u},getParameter:function(n){if(t.hashParameters.length>0)for(var i=0;i<t.hashParameters.length;i++)if(t.hashParameters[i][0]==n)return t.hashParameters[i][1];return null},loadFromUrl:function(){var i,n,r,u;if(t.hashParameters.length>0){if(i=t.methods.getParameter("gallery"),i!=null)switch(i){case"image":r=t.methods.getParameter("image");r!=null&&(n=t.buttonNavp.find('.thumbs-holder a[href="'+r+'"]'),n.length>0&&n.trigger("click"));break;case"rot360":t.buttonr360.trigger("click");break;case"video":t.buttonVide.trigger("click");u=t.methods.getParameter("id");u!=null&&(n=t.buttonNavp.find('.thumbs-holder a[href="'+u+'"]'),n.length>0&&(t.actModule=t.mainHolder.find(".wrap.VideoGallery"),t.activeOnLoad=!1,t.methods.loadVideo(n)))}}else t.buttonNavp.find(".thumbs-holder a:eq(0)").trigger("click")},hidePanels:function(){(t.mainHolder.hasClass("colwidth")&&parseInt(t.buttonNavp.css("bottom"))===22||parseInt(t.buttonNavp.css("bottom"))==0)&&(t.buttonHide.stop().animate({right:-t.buttonHide.width()},t.animTime),t.buttonPrev.stop().animate({left:-t.buttonPrev.width()},t.animTime),t.buttonNext.stop().animate({right:-t.buttonNext.width()},t.animTime),t.buttonDown.stop().animate({right:-(t.buttonDown.width()+1)},t.animTime),t.buttonTogg.stop().animate({bottom:t.mainHolder.hasClass("colwidth")?22:0},t.animTime),t.buttonNavp.stop().animate({bottom:-t.buttonNavp.height()},t.animTime),n(".videopanel").animate({bottom:-t.buttonNavp.height()},t.animTime),n(".nav-panel-videopanel").animate({bottom:-t.buttonNavp.height()},t.animTime))},showPanels:function(){parseInt(t.buttonNavp.css("bottom"))<0&&(t.buttonHide.stop().animate({right:t.imageCount>1?0:-t.buttonHide.width()},t.animTime),t.buttonPrev.stop().animate({left:0},t.animTime),t.buttonNext.stop().animate({right:0},t.animTime),t.buttonDown.stop().animate({right:0},t.animTime),t.actModule.hasClass("360Gallery")==!1&&t.buttonTogg.stop().animate({bottom:t.mainHolder.hasClass("colwidth")?82:60},t.animTime),t.mainHolder.hasClass("colwidth")?t.buttonNavp.stop().animate({bottom:22},t.animTime):t.buttonNavp.stop().animate({bottom:0},t.animTime),n(".videopanel").animate({bottom:t.mainHolder.hasClass("colwidth")?22:0},t.animTime),n(".nav-panel-videopanel").animate({bottom:t.mainHolder.hasClass("colwidth")?22:0},t.animTime))},startEvents:function(){t.mainHolder.on("mouseup mouseenter",function(){clearTimeout(t.timeout);t.methods.showPanels()});n(window).scroll(function(){clearTimeout(t.timeout);t.methods.showPanels();t.timeout=setTimeout(t.methods.hidePanels,t.timerTime*2)});t.mainHolder.on("mouseleave",function(){t.timeout=setTimeout(t.methods.hidePanels,t.timerTime*2)});if(t.buttonNavp.find(".thumbs-overlay").length>0)if(mobilecheck())t.buttonNavp.find(".thumbs-holder a").on({click:function(i){i.preventDefault();var r=n(this);r.hasClass("active")||(r.attr("data-image-alt",r.find("img").attr("alt")),t.animating||t.methods.thumbsController(r))}});else{t.buttonNavp.find(".thumbs-holder a").on("click",function(i){i.preventDefault();i.stopPropagation();var r=n(this);r.hasClass("active")||(r.attr("data-image-alt",r.find("img").attr("alt")),t.animating||t.methods.thumbsController(r))});if(Modernizr.touch==!1)t.buttonNavp.find(".thumbs-holder a").on({mouseenter:function(){t.methods.thumbFadeIn(n(this),!0)},mouseleave:function(){var i=n(this);i.hasClass("active")||t.methods.thumbFadeOut(i)}})}t.buttonPrev.on("click",function(n){n.preventDefault();var i=t.buttonNavp.find("a:eq("+t.lastimg+")");t.animating||t.methods.thumbsController(i)});t.buttonNext.on("click",function(n){n.preventDefault();var i=t.buttonNavp.find("a:eq("+(t.lastimg+2)+")");t.animating||t.methods.thumbsController(i)});t.buttonTogg.find("a.image")&&n(t.actModule).swipe({triggerOnTouchEnd:!0,allowPageScroll:"vertical",threshold:75,swipeLeft:function(){t.buttonNext.trigger("click")},swipeRight:function(){t.buttonPrev.trigger("click")}});t.buttonNavN.on("click",function(n){n.preventDefault();t.navArrows&&t.methods.thumbGallery("next")});t.buttonNavR.on("click",function(n){n.preventDefault();t.navArrows&&t.methods.thumbGallery("previous")});t.buttonHide.on("click",function(i){i.preventDefault();n(this).addClass("active");t.methods.defaultGalleryState()});t.buttonVide.on("click",function(i){i.preventDefault();t.methods.defaultGalleryState();t.switching||t.methods.switchTo(t.modules[1],n(this))});t.buttonr360.on("click",function(i){i.preventDefault();yam.vr360.init();t.buttonTogg.stop().animate({bottom:0},t.animTime);t.switching||t.methods.switchTo(t.modules[2],n(this))});t.buttonGall.on("click",function(i){i.preventDefault();t.switching||t.methods.switchTo(t.modules[0],n(this))});n(".wrap.VideoGallery").find(".video").on("click",r)},defaultGalleryState:function(){var i=n(".wrap.ImageGallery").find("li a.active"),r=n(".wrap.ImageGallery").find(".content-holder");r.find("img").fadeOut(function(){r.empty()});t.lastimg=t.newimage=0;t.methods.thumbFadeOut(i);i.removeClass("active");n(".wrap.ImageGallery").find(".thumbs-holder ul").animate({"margin-left":0});t.buttonHide.delay(100).fadeOut(function(){n(this).removeClass("active")});t.buttonNext.delay(100).fadeOut();t.buttonPrev.delay(100).fadeOut();n(".videopanel").animate({bottom:t.mainHolder.hasClass("colwidth")?22:0},t.animTime).show();n(".nav-panel-videopanel").animate({bottom:t.mainHolder.hasClass("colwidth")?22:0},t.animTime).show();t.firstload=!0;t.navArrows=t.methods.navArrowsState()},loadImage:function(i){var r=i.attr("href"),f=i.attr("data-image-alt"),s=new Image,u=n(".jsPreloader"),e=n.inArray(r,t.cache),o;if(t.activeOnLoad&&(o=window.location.href.split("#")[0],updateWindowLocation(o+"#gallery=image|image="+r)),t.animating=!0,e==-1)u.css({position:"absolute",top:t.mainHolder.height()*.5-42,left:t.mainHolder.width()*.5,"z-index":"30000"}),t.activeOnLoad&&u.fadeIn(),n(s).load(function(){t.methods.onLoadImage(n(this),u);t.cache.push(r)}).attr("src",r).attr("alt",f);else t.methods.onLoadImage(n('<img src="'+t.cache[e]+'" alt="'+f+'" />'),u)},onLoadImage:function(n,i){var r,u;t.firstload?(r=t.actModule.find(".content-holder img, .content-holder .video"),n.hide(),n.css({position:"absolute",bottom:-588,left:0}).show(),t.activeOnLoad?(t.actModule.find(".content-holder").prepend(n),t.imageCount>1&&t.buttonHide.fadeIn()):(t.methods.defaultGalleryState(),t.activeOnLoad=!0),n.animate({bottom:0},t.animTime*2,function(){r.remove();t.animating=!1}),i.fadeOut(),t.lastimg=t.newimage,t.buttonDown.attr("href",this.parseImagePath(n.attr("src"))),t.buttonDown.fadeIn(),t.firstload=!1):(r=t.actModule.find(".content-holder img, .content-holder .video"),u=t.lastimg>t.newimage?-954:954,r.css({"z-index":1}),n.css({position:"absolute",bottom:0,left:u,"z-index":2}),t.actModule.find(".content-holder").prepend(n),n.animate({left:0},t.animTime*2,function(){r.remove();t.animating=!1}),t.imageCount>1&&t.buttonHide.fadeIn(),t.actModule.hasClass("ImageGallery")&&t.methods.arrowsController(),t.buttonDown.attr("href",this.parseImagePath(n.attr("src"))),t.buttonDown.fadeIn(),i&&i.fadeOut(function(){i.remove()}),t.lastimg=t.newimage)},loadVideo:function(i){var r=i.attr("href"),u;t.activeOnLoad&&(u=window.location.href.split("#")[0],updateWindowLocation(u+"#gallery=video|id="+r));$loader=n(".jsPreloader");$loader.css({position:"absolute",top:t.mainHolder.height()*.5-42,left:t.mainHolder.width()*.5,"z-index":"30000"});$loader.fadeIn();t.actModule.find(".content-holder .video").unbind(".galleryVideoplayer");n(".ImageGallery .video").empty();i.data("source")==="yt"?this.loadYoutubeVideo(r):this.loadBbwVideo(r)},loadBbwVideo:function(u){var f,e,o;if(t.actModule.hasClass("VideoGallery"))t.actModule.find(".bb_wrapper").length===0?i(t.actModule.find(".content-holder .video").get(0),"http://yamaha.bbvms.com/p/chromeless_play_954x534/c/"+u+".js",function(){t.methods.handleVideoScriptLoaded($loader);var n=t.methods.getParameter("autoplay");cb.modules.videoSkinning.build(t.actModule.find(".video"),n);$loader.fadeOut(function(){$loader.remove()});t.actModule.find(".video").bind("loadedclipdata",function(){t.actModule.find(".video").removeClass("paused")})}):(t.actModule.find(".video .bb_wrapper")[0].call("load",{type:"LoadParams",clipId:u,autoPlay:!0}),t.actModule.find(".btn-bigplay").removeClass("show"),$loader.hide());else if(t.actModule.hasClass("ImageGallery")){f=n('<div class="video paused"><div class="btn-bigplay">bigplay<\/div><\/div>');t.buttonDown.fadeOut();t.firstload?(f.hide(),f.css({position:"absolute",bottom:-588,left:0}).show(),t.actModule.find(".content-holder").prepend(f),f.animate({bottom:0},t.animTime*2,function(){t.animating=!1}),t.firstload=!1):(e=t.actModule.find(".content-holder img, .content-holder .video"),o=t.lastimg>t.newimage?-954:954,e.css({"z-index":1}),f.css({position:"absolute",bottom:0,left:o,"z-index":2}),t.actModule.find(".content-holder").prepend(f),f.animate({left:0},t.animTime*2,function(){e.remove();t.animating=!1}));t.actModule.find(".video").on("click",r);i(t.actModule.find(".content-holder .video").get(0),"http://yamaha.bbvms.com/p/chromeless_play_954x534/c/"+u+".js",function(){t.methods.handleVideoScriptLoaded($loader);n(".ImageGallery .video").bind("loadedclipdata",function(){n(".ImageGallery .bb_wrapper")[0].call("play");n(".ImageGallery .video").removeClass("paused")})});t.lastimg=t.newimage}},loadYoutubeVideo:function(i){var r;if(t.actModule.hasClass("VideoGallery")){$loader.fadeOut(function(){$loader.remove()});n(".videopanel").animate({bottom:0},t.animTime).hide();n(".nav-panel-videopanel").animate({bottom:0},t.animTime).hide();r=n(t.actModule.find(".content-holder .video"));r.removeClass("paused");r.removeAttr("style");var u=r.parent().width(),f=r.parent().height(),e=r.hasClass("autoplay")?1:0,o='<iframe width="'+u+'" height="'+f+'" src="//www.youtube.com/embed/'+i+"?autoplay="+e+'&rel=0" frameborder="0" allowfullscreen><\/iframe>';r.html(o)}else t.actModule.hasClass("ImageGallery")&&alert("youtube in a gallery.")},handleVideoScriptLoaded:function(n){t.actVideo=t.actModule.find(".video");t.actModule.find(".content-holder .video").bind("loadedclipdata",function(){t.actVideo.find("object").width(t.actVideo.width());t.actVideo.find("object").height(t.actVideo.height());n&&n.fadeOut(function(){n.remove()})});t.actVideo.find(".bb_wrapper").length&&t.actVideo.find(".bb_wrapper")[0].call("play")},parseImagePath:function(n){var t=n.split("?")[0],i;return t.substring(0,2)=="//"||t.substring(0,11)=="https://cdn"||t.substring(0,10)=="http://cdn"?labels.CdnUrl+"FileDownload.ashx?f="+t:(i="http://"+window.location.host,i+labels.SiteUrl+"/Handlers/FileDownload.ashx?f="+i+t)},thumbsController:function(i){var r=t.buttonNavp.find("li a");r.each(function(){var i=n(this);if(i.hasClass("active"))return i.removeClass("active"),t.methods.thumbFadeOut(i),!1});i.addClass("active");t.methods.thumbFadeIn(i);t.newimage=r.index(i);t.actModule.hasClass("ImageGallery")&&(i.data("type")!="video"?t.methods.loadImage(i):t.methods.loadVideo(i),t.activeOnLoad&&t.methods.arrowsController());t.actModule.hasClass("VideoGallery")&&t.methods.loadVideo(i);t.methods.thumbGallery()},thumbGallery:function(n){var r,h;if(!t.busy||typeof n=="undefined"){t.busy=!0;t.buttonNavp=t.actModule.find(".nav-panel");var i=t.buttonNavp.find("li:eq(0)").width()+2,o=t.actModule.find(".thumbs-holder"),f=o.find("ul"),a=t.newimage==f.find("img").length?!0:!1,v=t.newimage+1==0?!0:!1,y=(t.newimage+1)*i,s=parseInt(f.css("marginLeft")),c=y+s,l=o.width(),u=Math.floor(o.width()/i),e=o.find("li").length%u;if(t.actModule.hasClass("VideoGallery")&&(u=1,e=i%u),t.maxPages=Math.ceil(o.find("li").length/u),t.leftOvers=e,t.leftOvers===0&&(t.maxPages=t.maxPages+1),r=null,n=="next"){if(h=(t.buttonNavp.find("a").length-2)*i*-1,h+=i*Math.ceil(l/i),s<h){t.busy=!1;return}t.page++;r=i*u;t.page==t.maxPages&&(r=i*e);f.animate({"margin-left":"-="+r+"px"},function(){t.busy=!1})}else if(n=="previous"){if(s==0){t.busy=!1;return}r=i*u;t.page==t.maxPages&&(r=i*e);t.page--;f.animate({"margin-left":"+="+r+"px"},function(){t.busy=!1})}else c>l&&!a?(t.page++,r=i*u,t.page==t.maxPages&&(r=i*e),f.animate({"margin-left":"-="+r+"px"},function(){t.busy=!1})):c<=0&&!v?(r=i*u,t.page==t.maxPages&&(r=i*e),t.page--,f.animate({"margin-left":"+="+r+"px"},function(){t.busy=!1})):t.busy=!1;t.methods.thumbsPanelArrows()}},thumbsPanelArrows:function(i){t.page>1?t.buttonNavR.animate({opacity:1},function(){n(this).css({cursor:"pointer"})}):t.buttonNavR.animate({opacity:0},function(){n(this).css({cursor:"default"})});var r=t.leftOvers===0?t.page<t.maxPages-1:t.page<t.maxPages;r||i!=="VideoGallery"||(r=t.mainHolder.find(".VideoGallery .thumbs-holder li").find("a").length>t.mainHolder.hasClass("colwidth")?1:2);r?(t.navArrows=!0,t.buttonNavN.animate({opacity:1},function(){n(this).css({cursor:"pointer"})})):t.buttonNavN.animate({opacity:0},function(){n(this).css({cursor:"default"})})},thumbFadeIn:function(n,i){n.find(".thumbs-overlay").stop(!0,!0).fadeIn();i||n.find(".thumbs-border").stop(!0,!0).animate({bottom:0},t.animTime)},thumbFadeOut:function(n){n.find(".thumbs-overlay").stop(!0,!0).fadeOut();n.find(".thumbs-border").stop(!0,!0).animate({bottom:-3},t.animTime)},arrowsController:function(){t.newimage<t.buttonNavp.find("img").length-1?t.buttonNext.fadeIn():t.buttonNext.fadeOut();t.newimage>0?t.buttonPrev.fadeIn():t.buttonPrev.fadeOut()},switchTo:function(i,r){t.switching=!0;t.buttonTogg.find(".active").removeClass("active");r.addClass("active");t.mainHolder.find(".wrap.active").fadeOut(function(){n(this).removeClass("active");t.mainHolder.find(".wrap."+i).fadeIn();t.mainHolder.find(".wrap."+i).addClass("active");t.actModule=t.mainHolder.find(".wrap."+i);t.switching=!1;(i=="ImageGallery"||i=="VideoGallery")&&(t.buttonTogg.stop().animate({bottom:t.mainHolder.hasClass("colwidth")?82:60},t.animTime),i=="ImageGallery"&&n(".wrap.ImageGallery").find(".thumbs-holder a:eq(0)").removeClass("active").trigger("click"),i=="VideoGallery"&&cb.modules.videoSkinning.remove(t.mainHolder.find(".wrap.VideoGallery .video")))});t.methods.defaultGalleryState();i=="VideoGallery"&&t.methods.thumbsPanelArrows(i)},reloadFromUrl:function(){t.hashParameters=t.methods.setParametersFromHash();t.methods.loadFromUrl()},navArrowsState:function(){var n=t.buttonNavp.find("img:eq(0)").width()+parseInt(t.buttonNavp.find("li").css("margin-right")),i=t.buttonNavp.find("img").length*n,r=t.mainHolder.find(".thumbs-holder").width();return i>r?!0:!1}},{init:function(){return t.methods.init()},reloadFromUrl:function(){return t.methods.reloadFromUrl()}}}($);cb.modules.mediaGalleryLite=function(n){var t={};return t.mainHolder=n(".jsMediaGalleryLite"),t.buttonPrev=t.mainHolder.find(".gmprevious"),t.buttonNext=t.mainHolder.find(".gmnext"),t.buttonNavp=t.mainHolder.find(".nav-panel"),t.buttonNavN=t.buttonNavp.find(".next-small"),t.buttonNavR=t.buttonNavp.find(".previous-small"),t.timerTime=3e3,t.panelsActive=!0,t.animTime=500,t.timeout=null,t.lastimg=t.newimage=0,t.cache=[],t.navArrows=!1,t.animating=!1,t.busy=!1,t.actual_image_width=0,t.actual_image_height=0,t.zoomed_image_width=2e3,t.zoomed_image_height=2e3,t.holder=t.mainHolder.find(".content-holder"),t.interval=null,t.page=1,t.maxPages=2,t.methods={init:function(){if(t.mainHolder.length!=0){var i=t.buttonNavp.find("img:eq(0)").width()+parseInt(t.buttonNavp.find("li").css("margin-right")),r=t.buttonNavp.find("img").length*i,u=t.mainHolder.find(".thumbs-holder").width(),n=t.mainHolder.find(".content-holder");n.find("img").length>0&&n.empty();t.navArrows=r>u?!0:!1;t.navArrows&&(t.buttonNavN.addClass("active"),t.buttonNavR.addClass("active"));t.methods.startEvents();t.buttonNavp.find(".thumbs-holder a:eq(0)").trigger("click")}},startEvents:function(){if(t.buttonNavp.find(".thumbs-overlay").length>0)t.buttonNavp.find(".thumbs-holder a").on({mouseenter:function(){t.methods.thumbFadeIn(n(this),!0)},mouseleave:function(){var i=n(this);i.hasClass("active")||t.methods.thumbFadeOut(i)},click:function(i){i.preventDefault();t.methods.thumbsController(n(this))}});t.buttonPrev.on("click",function(n){n.preventDefault();var i=t.buttonNavp.find("a:eq("+t.lastimg+")");t.animating||t.methods.thumbsController(i)});t.buttonNext.on("click",function(n){n.preventDefault();var i=t.buttonNavp.find("a:eq("+(t.lastimg+2)+")");t.animating||t.methods.thumbsController(i)});t.buttonNavN.on("click",function(n){n.preventDefault();t.navArrows&&t.methods.thumbGallery("next")});t.buttonNavR.on("click",function(n){n.preventDefault();t.navArrows&&t.methods.thumbGallery("previous")});n("#gallery-module-lite-zoom-highlight").length||t.holder.append(n('<div id="gallery-module-lite-zoom-highlight"><img alt="zoomed" /><\/div>'));t.holder.bind("mouseenter",function(){if(n(this).data("source")!=="yt"){t.methods.loadLargeImage(n(this).data("largeimage"));n(".accessories-info").length>0&&n("#gallery-module-lite-zoomed-overlay").css({width:n(".accessories-info").width(),height:n(".accessories-info").height()});var u,f,i,r,e=n("#gallery-module-lite-zoomed").width(),o=n("#gallery-module-lite-zoomed").height();n("#gallery-module-lite-zoomed, #gallery-module-lite-zoomed-overlay, #gallery-module-lite-zoom-highlight").stop(!0,!0).fadeIn();clearInterval(t.interval);t.interval=setInterval(function(){n("#gallery-module-lite-zoomed").hasClass("preloading")||n("#gallery-module-lite-zoomed").is(":visible")||n("#gallery-module-lite-zoomed").stop(!0,!0).fadeIn()},250);t.holder.bind("mousemove",function(s){var a=t.holder.find("img").eq(0),h;if(a.length!=0&&!n("#gallery-module-lite-zoomed").hasClass("preloading")){h=n("#gallery-module-lite-zoom-highlight");u=s.pageX;f=s.pageY;i=Math.round(u-h.width()/2-a.offset().left);r=Math.round(f-h.height()/2-a.offset().top);var v=1/(n(this).width()-h.width())*i,y=1/(n(this).height()-h.height())*r,p=(t.zoomed_image_width-e)*v,w=(t.zoomed_image_height-o)*y,c=p,l=w;i<0?c=0:i>n(this).width()-h.width()&&(c=t.zoomed_image_width-e);r<0?l=0:r>n(this).height()-h.height()&&(l=t.zoomed_image_height-o);c>0?c="-"+c:c*=-1;l>0?l="-"+l:l*=-1;i<0&&(i=0);r<0&&(r=0);i>n(this).width()-h.width()&&(i=n(this).width()-h.width());r>n(this).height()-h.height()&&(r=n(this).height()-h.height());n("#gallery-module-lite-zoomed img").css({left:c+"px",top:l+"px"});n("#gallery-module-lite-zoom-highlight").css({top:r+h.height()/2+"px",left:i+h.width()/2+"px"})}});t.holder.bind("mouseleave",function(){clearInterval(t.interval);n("#gallery-module-lite-zoomed, #gallery-module-lite-zoomed-overlay, #gallery-module-lite-zoom-highlight").fadeOut();t.holder.unbind("mousemove")})}})},loadLargeImage:function(i){var f=n("#gallery-module-lite-zoomed img");if(f.attr("src")!=i&&i!=""){var e=new Image,r=n(".jsPreloader"),u=n.inArray(i,t.cache);if(n("#gallery-module-lite-zoomed").css({"background-image":"url('"+labels.CdnUrl+"static-worlds/img/preloader.gif')","background-position":"center center"}).addClass("preloading"),u==-1)n(e).load(function(){t.methods.onLoadLargeImage(n(this),r);t.cache.push(i)}).attr("src",i);else t.methods.onLoadLargeImage(n('<img src="'+t.cache[u]+'" />'),r)}else i==""&&n("#gallery-module-lite-zoomed img").remove()},onLoadLargeImage:function(i){var f=n("#gallery-module-lite-zoomed img"),r=n("#gallery-module-lite-zoomed"),u;i.css({position:"absolute",top:0,left:0,opacity:1,"z-index":2});r.prepend(i);u=n("#gallery-module-lite-zoomed:visible").length>0?!0:!1;u==!1&&r.show();t.zoomed_image_width=i.width();t.zoomed_image_height=i.height();u==!1&&r.hide();f.remove();n("#gallery-module-lite-zoomed").removeClass("preloading")},loadImage:function(i){var u;t.holder.empty();var e=i.data("source")!=="yt"?i.attr("href"):i.data("largeimage"),f=i.data("largeimage"),s=new Image,r=n(".jsPreloader"),o=n.inArray(e,t.cache);if(t.animating=!0,o==-1)r.css({position:"absolute",top:t.mainHolder.height()*.5-42,left:t.mainHolder.width()*.5-r.width()*.5,"z-index":"30000"}),r.fadeIn(),n(s).load(function(){n(this).attr("alt",i.data("alttext"));i.data("source")==="yt"&&(n(this).addClass("video"),n(this).data("source","yt"),n(this).data("yt-id",i.attr("href")));t.methods.onLoadImage(n(this),r);t.cache.push(e)}).attr("src",e);else{u=n('<img src="'+t.cache[o]+'" alt="'+i.data("alttext")+'" />');i.data("source")==="yt"&&(u.addClass("video"),u.data("source","yt"),u.data("yt-id",i.attr("href")));t.methods.onLoadImage(u,r)}f=f!=undefined?f:"";t.mainHolder.find(".content-holder").data("largeimage",f);t.mainHolder.find(".content-holder").data("alttext",i.data("alttext"));t.mainHolder.find(".content-holder").data("source","");t.mainHolder.removeClass("video");i.data("source")==="yt"&&(t.mainHolder.find(".content-holder").data("source","yt"),t.mainHolder.addClass("video"))},onLoadImage:function(n,i){var r=t.mainHolder.find(".content-holder img"),u=t.mainHolder.find(".content-holder");r.css({"z-index":1});n.css({position:"absolute",bottom:0,left:0,opacity:0,"z-index":2});u.prepend(n);t.actual_image_width=n.width();t.actual_image_height=n.height();n.attr("width",u.width()).attr("height",u.height());r.animate({opacity:0});n.animate({opacity:1},t.animTime*2,function(){r.remove();t.animating=!1});i.fadeOut();t.lastimg=t.newimage;n.data("source")==="yt"&&n.data("yt-id")&&t.methods.loadYoutubeVideoLite(n.data("yt-id"))},thumbsController:function(i){function u(){r.each(function(){var i=n(this);if(i.hasClass("active"))return i.removeClass("active"),t.methods.thumbFadeOut(i),!1});i.addClass("active");t.methods.thumbFadeIn(i);t.newimage=r.index(i);t.methods.loadImage(i);t.methods.arrowsController();t.methods.thumbGallery()}var r=t.buttonNavp.find("li a");u()},thumbGallery:function(i){var u,c;if(!t.busy||typeof i=="undefined"){t.busy=!0;var r=t.buttonNavp.find("img:eq(0)").width()+2,f=t.mainHolder.find(".thumbs-holder"),e=f.find("ul"),v=t.newimage==e.find("img").length?!0:!1,y=t.newimage+1==0?!0:!1,p=(t.newimage+1)*r,h=parseInt(e.css("marginLeft")),l=p+h,a=f.width(),o=Math.floor(f.width()/f.find("img").width())-1,s=f.find("img").length%o;if(t.maxPages=Math.ceil(f.find("img").length/o),i=="next"){if(c=t.buttonNavp.find("img").length*r*-1,c+=r*Math.ceil(a/r),h<c){t.busy=!1;return}t.page++;u=r*o;t.page==t.maxPages&&(u=r*s);e.animate({"margin-left":"-="+u+"px"},function(){t.busy=!1});t.methods.arrowsController()}else if(i=="previous"){if(h==0){t.busy=!1;return}u=r*o;t.page==t.maxPages&&(u=r*s);t.page--;e.animate({"margin-left":"+="+u+"px"},function(){t.busy=!1});t.methods.arrowsController()}else l>a&&!v?(t.page++,u=r*o,t.page==t.maxPages&&(u=r*s),e.animate({"margin-left":"-="+u+"px"},function(){t.busy=!1})):l<=0&&!y?(u=r*o,t.page==t.maxPages&&(u=r*s),t.page--,e.animate({"margin-left":"+="+u+"px"},function(){t.busy=!1})):t.busy=!1;t.page>1?t.buttonNavR.animate({opacity:1},function(){n(this).css({cursor:"pointer"})}):t.buttonNavR.animate({opacity:0},function(){n(this).css({cursor:"default"})});t.page<t.maxPages?t.buttonNavN.animate({opacity:1},function(){n(this).css({cursor:"pointer"})}):t.buttonNavN.animate({opacity:0},function(){n(this).css({cursor:"default"})})}},thumbFadeIn:function(n,i){n.find(".thumbs-overlay").stop(!0,!0).fadeIn();i||n.find(".thumbs-border").stop(!0,!0).animate({bottom:0},t.animTime)},thumbFadeOut:function(n){var i=n.find(".thumbs-overlay");i&&!i.hasClass("video")&&i.stop(!0,!0).fadeOut();n.find(".thumbs-border").stop(!0,!0).animate({bottom:-3},t.animTime)},arrowsController:function(){t.newimage<t.buttonNavp.find("img").length-1?t.buttonNext.fadeIn():t.buttonNext.fadeOut();t.newimage>0?t.buttonPrev.fadeIn():t.buttonPrev.fadeOut()},loadYoutubeVideoLite:function(n){var i=t.holder.find(".video");if(i&&i.length>0){var r=t.holder.width(),u=t.holder.height(),f='<iframe width="'+r+'" height="'+u+'" src="//www.youtube.com/embed/'+n+'?autoplay=0&rel=0" frameborder="0" allowfullscreen><\/iframe>';t.holder.html(f)}}},{init:function(){return t.methods.init()}}}($);cb.modules.videoSkinning=function(){function t(n){var t=Math.floor(n/60),i=Math.floor(n-60*t);return i<10&&(i="0"+i),t<10&&(t="0"+t),t+":"+i}var n=$(this);return n.mainHolder=$(".jsVideoSkinning"),n.updateFrequency=20,n.methods={init:function(){n.mainHolder.length!=0&&$.each(n.mainHolder,function(){n.methods.apply($(this))})},createUI:function(){var n=$('<div class="videoSkin"><\/div>'),u=$('<div class="btn-playpause">play<\/div>'),r=$('<div class="bar-container"><\/div>'),f=$('<div class="bar">playbar<\/div>'),e=$('<div class="time-current">00:00<\/div>'),o=$('<div class="time-total">00:00<\/div>'),t=$('<div class="sound"><\/div>'),i=$('<div class="volume"><\/div>'),s=$('<div class="volume-mask"><\/div>'),h=$('<div class="volume-bar"><\/div>'),c=$('<div class="mute"><\/div>');return i.append(s),i.append(h),t.append(i),t.append(c),r.append(f),n.append(u),n.append(e),n.append(r),n.append(o),n.append(t),n},build:function(i,r){var h=!0,a;if($(i.data("controlholder")).find(".videoSkin").length==0?h=!1:i.find(".bb_wrapper").find(".videoSkin").length==0&&(h=!1),h===!1){var u=i,c=null,e=null,l=0,o=0,f=n.methods.createUI(),w=f.find(".time-total"),b=f.find(".time-current"),v=f.find(".bar"),s=i.find(".bb_wrapper"),y=!1,k=!1;u.bar=v;a=function(){l=Number(u.find(".bb_wrapper").attr("data-currenttime"));var n=100/o*l;b.html(t(l));v.css("width",n+"%")};function p(){if(u.find(".bb_wrapper")[0]!=undefined){if(e=u.find(".bb_wrapper")[0].id,e=e.split("-"),e=e[e.length-1],u.find(".bb_wrapper")[0].call("setTimeUpdateFrequency",{value:n.updateFrequency}),BBitems.length==0)c=BBitems.clipData;else for(var i=BBitems.length-1;i>=0;i--)BBitems[i].clipData!=null&&BBitems[i].clipData.id==e&&(c=BBitems[i].clipData);u.find("video").length>0&&(k=!0,u.find("video").bind("timeupdate.videoplayer",a));o=c.assets[0].length;w.html(t(o));(!r||r&&r.toLowerCase()=="true")&&(u.find(".bb_wrapper")[0].call("play"),u.find(".btn-bigplay").removeClass("show"))}}u.data("controlholder")!=undefined?($(u.data("controlholder")).find(".videoSkin").remove(),$(u.data("controlholder")).append(f)):(s.find(".videoSkin").remove(),s.append(f));i.parent().find(".btn-bigplay").length==0&&(s.length>0?s.parent().prepend('<div class="btn-bigplay">bigplay<\/div>'):i.parent().prepend('<div class="btn-bigplay">bigplay<\/div>'));i.unbind(".videoplayer");f.find(".btn-playpause").on("click.videoplayer",function(){$(this).toggleClass("pause");$(this).hasClass("pause")==!1?u.find(".bb_wrapper")[0].call("pause"):u.find(".bb_wrapper")[0].call("play")});f.find(".bar-container").on("click.videoplayer",function(n){if(y==!0){var t=parseInt($(this).css("margin-left"),10),i=n.pageX-t-$(this).parent().offset().left,r=100/$(this).width()*i,f=Math.round(o/100*r);u.find(".bb_wrapper")[0].call("seek",f)}});f.find(".sound .mute").on("click.videoplayer",function(){$(this).toggleClass("on");var n=$(this).hasClass("on");$(this).find(".volume-bar").css("width",n?0:"100%");u.find(".bb_wrapper")[0].call("setMuted",n?!0:!1)});f.find(".sound .volume").on("click.videoplayer",function(n){var i=n.pageX-$(this).offset().left,t=1/$(this).width()*i;$(this).find(".volume-bar").css("width",t*100+"%");u.find(".bb_wrapper")[0].call("setVolume",t)});u.bind("loadedclipdata.videoplayer",p);u.bind("play.videoplayer",function(){y=!0;f.find(".btn-playpause").addClass("pause");i.removeClass("paused")});u.bind("pause.videoplayer",function(){f.find(".btn-playpause").removeClass("pause");i.addClass("paused")});u.bind("ended.videoplayer",function(){f.find(".btn-playpause").removeClass("pause");i.addClass("paused")});u.bind("playing.videoplayer",function(){f.find(".btn-playpause").addClass("pause");i.removeClass("paused")});u.bind("timeupdate.videoplayer seeked.videoplayer",a);p(null)}},remove:function(n){n.unbind(".videoplayer");n.data("controlholder")!=undefined?$(n.data("controlholder")).find(".videoSkin").remove():n.find(".videoSkin").remove()}},{init:function(){return n.methods.init()},build:function(t,i){return n.methods.build(t,i)},remove:function(t){return n.methods.remove(t)}}}();cb.modules.mediaGallery.init();cb.modules.mediaGalleryLite.init();cb.modules.videoSkinning.init();cb.modules.YoutubePlayers=[];$(window).bind("hashchange",function(){cb.ignoreHashChange===!1&&window.location.hash&&window.location.hash.indexOf("gallery")>-1&&(window.location=window.location.href,window.scrollTo(0,0),cb.modules.mediaGallery.reloadFromUrl());cb.ignoreHashChange=!1});detectIE()&&setTimeout(function(){typeof player=="undefined"&&onYouTubeIframeAPIReady()},3e3)